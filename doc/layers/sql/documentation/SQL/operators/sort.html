<!DOCTYPE html>
<html lang='en' xml:lang='en' xmlns='http://www.w3.org/1999/xhtml'>
<head>


<script type="text/javascript" src="/static/js/analytics.js"></script>
<script type="text/javascript">archive_analytics.values.server_name="wwwb-app7.us.archive.org";archive_analytics.values.server_ms=464;</script>
<link type="text/css" rel="stylesheet" href="/static/css/banner-styles.css"/>


<title>
SQL Layer &mdash;
Sort

&mdash; FoundationDB
</title>
<meta charset='utf-8'>
<meta content='SQL, layer, foundationdb, database, nosql, scalable, fault tolerant, acid, transactions' name='keywords'>
<meta content='The FoundationDB SQL Layer is a scalable, fault tolerant, ANSI SQL engine.' name='description'>
<meta content='FoundationDB' name='author'>
<meta content='IE=edge' http-equiv='x-ua-compatible'>
<meta content='173350679' property='twitter:account_id'>
<meta content='FoundationDB' property='og:title'>
<meta content='https://foundationdb.com' property='og:url'>
<meta content='https://foundationdb.com/images/stacks.png' property='og:image'>
<meta content='FoundationDB is a database that combines NoSQL scalability with true multikey ACID transactions.' name='og:description'>
<meta content='2j_g9LCoS3SGSPULb2MLPGk2raKkFd4hPOuWWM5AsVw' name='google-site-verification'>
<link href='https://foundationdb.com/layers/sql/documentation/SQL/operators/sort.html' rel='canonical'>
<!--[if lt IE 9]>
<script src='/web/20150325003757/https://html5shiv.googlecode.com/svn/trunk/html5.js'></script>
<![endif]-->
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<link href=../../../../../im_/favicon-eea8382cf5c35e23f9fb4273c134b2c0.png rel="shortcut icon" type="image/png" />
<meta content="authenticity_token" name="csrf-param" />
<meta content="wcVH0qYrgIDal8Kx10xmZIzNgnD0d0/RXPTIqTtufYE=" name="csrf-token" />
<link href=../../../../../cs_/google.css media="screen" rel="stylesheet" type="text/css" />
<link href=../../../../../cs_/application-5cc81fa97aedacb1157cce0e30895a04.css media="all" rel="stylesheet" type="text/css" />

</head>
<body class='documentation' id='sql'>



<header id='header'>
<div class='container'>
<a href='/web/20150325003757/https://foundationdb.com/' id='logo'></a>
<a id='mobile-nav-toggle'><img alt="Hamburger" src=../../../../../im_/hamburger-bbd9560947385da4445b540086f10c9b.png /></a>
<a id='mobile-auth-toggle'>
<i class='icon-user'></i>
</a>
<div id='auth-links'></div>
</div>
</header>
<nav id='nav'>
<div class='container'>
<ul>
<li class=''>
<a href=../../../../../index.html><span>H</span>ome</a>
</li>
<li class='with-subnav'>
<a href=../../../../../key-value-store/index.html><span>K</span>ey-Value Store</a>
<ul class='subnav'>
<li><a href=../../../../../key-value-store/index.html>Overview</a></li>
<li><a href=../../../../../key-value-store/documentation/index.html>Documentation</a></li>
<li><a href=../../../../../key-value-store/performance/index.html>Performance</a></li>
</ul>
</li>
<li class='active with-subnav'>
<a href=../../../index.html><span>S</span>QL Layer</a>
<ul class='subnav'>
<li><a href=../../../index.html>Overview</a></li>
<li><a href=../../index.html>Documentation</a></li>
<li><a href=../../../performance/index.html>Performance</a></li>
</ul>
</li>
<li class='with-subnav'>
<a href=../../../../../community/index.html><span>R</span>esources</a>
<ul class='subnav'>
<li><a href=../../../../../index.html>Community</a></li>
<li><a href=../../../../../courses/index.html>Education</a></li>
<li><a href=../../../../../videos/index.html>Videos</a></li>
</ul>
</li>
<li class='with-subnav'>
<a href=../../../../../about/index.html><span>C</span>ompany</a>
<ul class='subnav'>
<li><a href=../../../../../about/index.html>About Us</a></li>
<li><a href=../../../../../contact/index.html>Contact Us</a></li>
<li><a href=../../../../../jobs/index.html>Jobs</a></li>
</ul>
</li>
</ul>
</div>
</nav>
<div id='flash'>
<div class='notice'></div>
<div class='alert'></div>
</div>
<div id='documentation-inner'>
<div id='docs-global-nav-content'>
<ul>
<li><a href=../../index.html>Summary</a></li>
<li>
<a href=../../Concepts/index.html>Concepts</a>
<ul>
<li><a href=../../Concepts/features.html>Features</a></li>
<li><a href=../../Concepts/architecture.html>Physical Architecture</a></li>
<li><a href=../../Concepts/table.groups.html>Table-Groups</a></li>
<li><a href=../../Concepts/mapping.sql.to.kv.html>Mapping SQL to Key-Value</a></li>
<li><a href=../../Concepts/known.limitations.html>Known Limitations</a></li>
<li><a href=../../Concepts/glossary.html>Glossary</a></li>
</ul>
</li>
<li>
<a href=../../Developer/index.html>Developers</a>
<ul>
<li><a href=../../Developer/developer.guide.html>Developer Guide</a></li>
<li><a href=../../Developer/client.tools.html>Client tools</a></li>
<li><a href=../../Developer/performance.guide.html>Performance Guide</a></li>
<li><a href=../../AppIntegration/index.html>Application Integration</a></li>
<li><a href=../index.html>SQL Reference</a></li>
<li><a href=../../REST/rest.api.reference.html>REST API Reference</a></li>
</ul>
</li>
<li>
<a href=../../Admin/index.html>Operations</a>
<ul>
<li><a href=../../Admin/configuration.html>Configuration</a></li>
<li><a href=../../Admin/administration.html>Administration</a></li>
<li><a href=../../Admin/security.html>Security</a></li>
<li><a href=../../Admin/backup.html>Backup and Restoration</a></li>
</ul>
</li>
<li><a href=../../ReleaseNotes/index.html>Release Notes</a></li>
</ul>
</div>

<script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
  	URL_ROOT:    '',
  	VERSION:     '2.1.2',
  	COLLAPSE_INDEX: false,
  	FILE_SUFFIX: '.html',
  	HAS_SOURCE:  true
  };
</script>

<div id="breadcrumbs" class="container">
  <div id="breadcrumbs-inner">
    
    <a href=../../index.html>FoundationDB SQL Layer 2.1</a> &raquo;
    <a href=../../Developer/index.html>SQL Layer Developer Reference</a> &raquo;
    <a href=../index.html>SQL Reference</a> &raquo;
    <a href=../../Concepts/query.execution.html>Query Execution</a> &raquo;
    
    <a id="mobile-search-link" href=../../../../../documentation/latest/search.html>
      <img alt="Magnifying-glass" src=../../../../../im_/magnifying-glass-1e869de9fc6b47eca22fbd10a9d914a3.png />
    </a>
  </div>
</div>
<div id="documentation" class="container">
  <div class="body sphinx">
    
  <div class="section" id="sort">
<span id="algebra-operator-sort"></span><h1>Sort<a class="headerlink" href="#sort" title="Permalink to this headline">∞</a></h1>
<p>There exist two sort operators in the SQL Layer.</p>
<ul>
<li><p class="first"><strong>Insertion Limit</strong>:  This operator keeps the N smallest items in the input stream and returns them in order once the input stream has been completely processed. The implementation uses a TreeSet, so it isn&#8217;t really intended to handle arbitrarily many rows. Currently, it only handles 100 rows. If a sort needs to be performed on a larger set than this, then the General operator is used.</p>
</li>
<li><dl class="first docutils">
<dt><strong>General</strong>: This operator consumes the entire input stream. The rows are then placed into a sorted</dt>
<dd><p class="first last">order and sent out the output stream in that order.</p>
</dd>
</dl>
</li>
</ul>
<div class="section" id="behavior">
<h2>Behavior<a class="headerlink" href="#behavior" title="Permalink to this headline">∞</a></h2>
<p>The General sorter uses a Merge Join Sort. The rows are sorted by inserting
them into a memory pool (64M in size). If the pool is filled, the whole pool
is written to disk, and the next set of rows is written to the memory pool.</p>
<p>If the sorted rows never exceeds the initial pool size, the rows are read from the
memory pool in sorted order. If the initial input stream does not produce enough data to overflow the
memory pool, no disk files will be produced.</p>
<p>If the sort requires the disk files, the sort process opens all of the files and performs an
n-way merge on the resulting files as the rows are returned to the output stream.</p>
</div>
<div class="section" id="output">
<h2>Output<a class="headerlink" href="#output" title="Permalink to this headline">∞</a></h2>
<p>The rows of the input stream, sorted according to the ordering specification. Duplicates are eliminated if and only if the sort option is SUPPRESS_DUPLICATES.</p>
</div>
<div class="section" id="performance">
<h2>Performance<a class="headerlink" href="#performance" title="Permalink to this headline">∞</a></h2>
<p>Insertion Limited does no IO. For each row, a sorted set of rows is maintained, requiring O(log(limit)) comparisons  per row.</p>
<p>The Merge Join  generates IO dependent upon the size of the input stream.</p>
<ul class="simple">
<li>If the input stream generates less than the memory pool size (64MB default), there is no IO generated.</li>
<li>If the input stream generates more than the memory pool size, it should generate one read and one writes for each row to the local disk.</li>
</ul>
</div>
<div class="section" id="memory-requirements">
<h2>Memory Requirements<a class="headerlink" href="#memory-requirements" title="Permalink to this headline">∞</a></h2>
<p>The Insertion Limited holds up to limit rows in memory.</p>
<p>The Merge Join allocates a 64M working buffer for the sort processing.</p>
</div>
</div>


  </div>
  <div id="search-documentation">
    <form action=../../search.html method="get">
      <input type="text" name="q" class="search-query" placeholder="Search Documentation" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <div id="docs-page-nav">
      <h3>Navigate this page</h3>
      <ul><li><a class="reference internal" href="#">Sort</a><ul><li><a class="reference internal" href="#behavior">Behavior</a></li><li><a class="reference internal" href="#output">Output</a></li><li><a class="reference internal" href="#performance">Performance</a></li><li><a class="reference internal" href="#memory-requirements">Memory Requirements</a></li></ul></li></ul>
    </div>
    <div id="docs-global-nav">
      <h3>Navigate All Docs</h3>
    </div>
  </div>
</div>


</div>
<footer id='footer'>
<div class='container'>
<ul>
<li>
<h3>Get Help</h3>
<ul id='get-help-list'>
<li><a href=../../../../../contact/index.html>Contact Us</a></li>
</ul>
</li>
<li>
<h3>Social</h3>
<ul>
<li><a href=../../../../../foundationdb/index.html>Twitter</a></li>
</ul>
</li>
<li>
<h3>Legal</h3>
<ul>
<li><a href=../../../../../legal/privacy/index.html>Privacy Policy</a></li>
<li><a href=../../../../../legal/terms/index.html>Terms of Service</a></li>
<li><a href=../../../../../legal/trademark/index.html>Trademark Disclaimer</a></li>
</ul>
</li>
</ul>
</div>
<div id='copyright'>&copy; 2015 FoundationDB</div>
</footer>
<div class='modal' id='login-modal'>
<div class='cover'></div>
<div class='inner'>
<h2>FoundationDB Log In</h2>
<div class='content'>
<div id='explanation'></div>
<form>
<fieldset>
<div class='errors'></div>
<ul>
<li>
<label for="email">Email Address</label>
<input id='email' type='email' value=''>
</li>
<li>
<label for="password">Password</label>
<input id='password' type='password'>
</li>
<li class='actions'>
<button>
Log In
<span class='spinner'></span>
</button>
<a href="#signup">Need an account?</a>
<a href="#reset-password" id="login-reset-link">Need to reset your password?</a>
</li>
</ul>
</fieldset>
</form>
</div>
<a class='close' href='#close'>
<i class='icon-cancel'></i>
</a>
</div>
</div>
<div class='modal' id='reset-password-modal'>
<div class='cover'></div>
<div class='inner'>
<h2>Reset Your Password</h2>
<div class='content'>
<form>
<p class='note'>Enter your email address below and we'll send you password reset instructions.</p>
<fieldset>
<div class='errors'></div>
<ul>
<li>
<label for="email">Email Address</label>
<input autocapitalize="false" id="email" name="email" type="email" value="" />
</li>
<li class='actions'>
<button>
Send Instructions
<span class='spinner'></span>
</button>
<a href="#cancel">Cancel</a>
</li>
</ul>
</fieldset>
</form>
<div id='done'>
<p>Please check your email. Your password reset instructions have been emailed to you.</p>
</div>
</div>
<a class='close' href='#close'>
<i class='icon-cancel'></i>
</a>
</div>
</div>
<div class='modal' id='video-modal'>
<div class='cover'></div>
<div class='inner'>
<iframe></iframe>
<a class='close' href='#close'>
<i class='icon-cancel'></i>
</a>
</div>
</div>

<script src=../../../../../js_/application-a7f51eff68dda15563d95dd6b13ee7ae.js type="text/javascript"></script>
<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
<![endif]-->

</body>
</html>





<!--
     FILE ARCHIVED ON 0:37:57 Mar 25, 2015 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 15:43:19 Oct 16, 2016.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
