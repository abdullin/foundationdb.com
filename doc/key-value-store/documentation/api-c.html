<!DOCTYPE html>
<html lang='en' xml:lang='en' xmlns='http://www.w3.org/1999/xhtml'>
<head>


<script type="text/javascript" src="/static/js/analytics.js"></script>
<script type="text/javascript">archive_analytics.values.server_name="wwwb-app13.us.archive.org";archive_analytics.values.server_ms=295;</script>
<link type="text/css" rel="stylesheet" href="/static/css/banner-styles.css"/>


<title>

C API

&mdash; FoundationDB
</title>
<meta charset='utf-8'>
<meta content=' foundationdb, database, nosql, scalable, fault tolerant, acid, transactions' name='keywords'>
<meta content='FoundationDB is a database that combines NoSQL scalability with true multikey ACID transactions.' name='description'>
<meta content='FoundationDB' name='author'>
<meta content='IE=edge' http-equiv='x-ua-compatible'>
<meta content='173350679' property='twitter:account_id'>
<meta content='FoundationDB' property='og:title'>
<meta content='https://foundationdb.com' property='og:url'>
<meta content='https://foundationdb.com/images/stacks.png' property='og:image'>
<meta content='FoundationDB is a database that combines NoSQL scalability with true multikey ACID transactions.' name='og:description'>
<meta content='2j_g9LCoS3SGSPULb2MLPGk2raKkFd4hPOuWWM5AsVw' name='google-site-verification'>
<link href='https://foundationdb.com/key-value-store/documentation/api-c.html' rel='canonical'>
<!--[if lt IE 9]>
<script src='/web/20150325003218/https://html5shiv.googlecode.com/svn/trunk/html5.js'></script>
<![endif]-->
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<link href=../../im_/favicon-eea8382cf5c35e23f9fb4273c134b2c0.png rel="shortcut icon" type="image/png" />
<meta content="authenticity_token" name="csrf-param" />
<meta content="Ko+HedIrHj9ssOkf8OGOe2N/yCa0BZCwjZRsoInJPrg=" name="csrf-token" />
<link href=../../cs_/google.css media="screen" rel="stylesheet" type="text/css" />
<link href=../../cs_/application-5cc81fa97aedacb1157cce0e30895a04.css media="all" rel="stylesheet" type="text/css" />

</head>
<body class='show' id='documentation'>



<header id='header'>
<div class='container'>
<a href='/web/20150325003218/https://foundationdb.com/' id='logo'></a>
<a id='mobile-nav-toggle'><img alt="Hamburger" src=../../im_/hamburger-bbd9560947385da4445b540086f10c9b.png /></a>
<a id='mobile-auth-toggle'>
<i class='icon-user'></i>
</a>
<div id='auth-links'></div>
</div>
</header>
<nav id='nav'>
<div class='container'>
<ul>
<li class=''>
<a href=../../index.html><span>H</span>ome</a>
</li>
<li class='active with-subnav'>
<a href=../index.html><span>K</span>ey-Value Store</a>
<ul class='subnav'>
<li><a href=../index.html>Overview</a></li>
<li><a href=index.html>Documentation</a></li>
<li><a href=../performance/index.html>Performance</a></li>
</ul>
</li>
<li class='with-subnav'>
<a href=../../layers/sql/index.html><span>S</span>QL Layer</a>
<ul class='subnav'>
<li><a href=../../layers/sql/index.html>Overview</a></li>
<li><a href=../../layers/sql/documentation/index.html>Documentation</a></li>
<li><a href=../../layers/sql/performance/index.html>Performance</a></li>
</ul>
</li>
<li class='with-subnav'>
<a href=../../community/index.html><span>R</span>esources</a>
<ul class='subnav'>
<li><a href=../../https:/web.archive.org/web/20150325003218/http:/community.foundationdb.com>Community</a></li>
<li><a href=../../https:/web.archive.org/web/20150325003218/https:/foundationdb.com/courses>Education</a></li>
<li><a href=../../videos/index.html>Videos</a></li>
</ul>
</li>
<li class='with-subnav'>
<a href=../../about/index.html><span>C</span>ompany</a>
<ul class='subnav'>
<li><a href=../../about/index.html>About Us</a></li>
<li><a href=../../contact/index.html>Contact Us</a></li>
<li><a href=../../jobs/index.html>Jobs</a></li>
</ul>
</li>
</ul>
</div>
</nav>
<div id='flash'>
<div class='notice'></div>
<div class='alert'></div>
</div>
<div id='documentation-inner'>
<div id='docs-global-nav-content'>
<ul>
<li><a href=index.html>Summary</a></li>
<li><a href=index.html>Getting Started</a></li>
<li><a href=tutorials.html>Tutorials</a></li>
<li><a href=developer-guide.html>Developer Guide</a></li>
<li><a href=data-modeling.html>Data Modeling</a></li>
<li><a href=../recipes/index.html>Design Recipes</a></li>
<li>
<a href=api-reference.html>API Reference</a>
<ul>
<li><a href=api-python.html>Python API</a></li>
<li><a href=api-ruby.html>Ruby API</a></li>
<li><a href=api-node.html>Node.js API</a></li>
<li><a href=api-php.html>PHP API</a></li>
<li><a href=../../https:/web.archive.org/web/20150325003218/https:/foundationdb.com/key-value-store/documentation/javadoc/index.html>Java API</a></li>
<li><a href=../../https:/web.archive.org/web/20150325003218/http:/godoc.org/github.com/FoundationDB/fdb-go/fdb>Go API</a></li>
<li><a href=../../https:/web.archive.org/web/20150325003218/https:/github.com/Doxense/foundationdb-dotnet-client>.NET API</a></li>
<li><a href=api-c.html class="active">C API</a></li>
</ul>
</li>
<li><a href=building-cluster.html>Building a Cluster</a></li>
<li><a href=configuration.html>Configuration</a></li>
<li><a href=administration.html>Administration</a></li>
<li><a href=command-line-interface.html>Command Line Interface</a></li>
<li><a href=mr-status.html>Machine-Readable Status</a></li>
<li><a href=tls.html>Transport Layer Security</a></li>
<li><a href=backups.html>Backup and Restoration</a></li>
<li><a href=known-limitations.html>Known Limitations</a></li>
<li><a href=platforms.html>Platform Issues</a></li>
<li><a href=release-notes.html>Release Notes</a></li>
<li><a href=older/index.html>Older Versions</a></li>
<li><a href=../white-papers/index.html>White Papers</a></li>
</ul>
</div>

<script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
  	URL_ROOT:    '',
  	VERSION:     '3.0.7',
  	COLLAPSE_INDEX: false,
  	FILE_SUFFIX: '.html',
  	HAS_SOURCE:  true
  };
</script>

<div id="breadcrumbs" class="container">
  <div id="breadcrumbs-inner">
    
    <a href="index.html">FoundationDB 3.0</a> &raquo;
    <a href="building-with-the-api.html">Building with the API</a> &raquo;
    <a href="api-reference.html">API Reference</a> &raquo;
    
    <a id="mobile-search-link" href=search.html>
      <img alt="Magnifying-glass" src=../../im_/magnifying-glass-1e869de9fc6b47eca22fbd10a9d914a3.png />
    </a>
  </div>
</div>
<div id="documentation" class="container">
  <div class="body sphinx">
    
  <div class="section" id="c-api">
<h1>C API<a class="headerlink" href="#c-api" title="Permalink to this headline">∞</a></h1>
<p>This API provides a very low-level interface to FoundationDB. It is primarily intended for use in implementing higher level APIs, rather than for direct use. If you are new to FoundationDB, you are probably better served by reading one of the other APIs first.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">∞</a></h2>
<p>FoundationDB&#8217;s C bindings are installed with the FoundationDB client binaries (see <a class="reference internal" href="api-general.html#installing-client-binaries"><em>Installing FoundationDB client binaries</em></a>).</p>
<dl class="docutils">
<dt>On Linux,</dt>
<dd><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">fdb_c.h</span></tt> is installed into <tt class="docutils literal"><span class="pre">/usr/include/foundationdb/</span></tt></div>
<div class="line"><tt class="docutils literal"><span class="pre">libfdb_c.so</span></tt> is installed into <tt class="docutils literal"><span class="pre">/usr/lib/</span></tt></div>
</div>
</dd>
<dt>On Mac OS X,</dt>
<dd><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">fdb_c.h</span></tt> is installed into <tt class="docutils literal"><span class="pre">/usr/local/include/foundationdb/</span></tt></div>
<div class="line"><tt class="docutils literal"><span class="pre">libfdb_c.dylib</span></tt> is installed into <tt class="docutils literal"><span class="pre">/usr/local/lib/</span></tt></div>
</div>
</dd>
<dt>On Windows,</dt>
<dd><div class="first last line-block">
<div class="line"><tt class="docutils literal"><span class="pre">fdb_c.h</span></tt> is installed into <tt class="docutils literal"><span class="pre">%PROGRAMFILES%\foundationdb\include\foundationdb\</span></tt></div>
<div class="line"><tt class="docutils literal"><span class="pre">fdb_c.dll</span></tt> is installed into <tt class="docutils literal"><span class="pre">%PROGRAMFILES%\foundationdb\bin\</span></tt></div>
<div class="line"><tt class="docutils literal"><span class="pre">fdb_c.lib</span></tt> is installed into <tt class="docutils literal"><span class="pre">%PROGRAMFILES%\foundationdb\lib\foundationdb\</span></tt></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="linking">
<h2>Linking<a class="headerlink" href="#linking" title="Permalink to this headline">∞</a></h2>
<p>The FoundationDB C bindings are provided as a shared object which may be linked against at build time, or dynamically loaded at runtime. Any program that uses this API must be able to find a platform-appropriate shared library at runtime. Generally, this condition is best met by installing the FoundationDB client binaries (see <a class="reference internal" href="api-general.html#installing-client-binaries"><em>Installing FoundationDB client binaries</em></a>) on any machine where the program will be run.</p>
<div class="section" id="linux">
<h3>Linux<a class="headerlink" href="#linux" title="Permalink to this headline">∞</a></h3>
<p>When linking against <tt class="docutils literal"><span class="pre">libfdb_c.so</span></tt>, you must also link against <tt class="docutils literal"><span class="pre">libm</span></tt>, <tt class="docutils literal"><span class="pre">libpthread</span></tt> and <tt class="docutils literal"><span class="pre">librt</span></tt>. These dependencies will be resolved by the dynamic linker when using this API via <tt class="xref c c-func docutils literal"><span class="pre">dlopen()</span></tt> or an FFI.</p>
</div>
<div class="section" id="mac-os-x">
<h3>Mac OS X<a class="headerlink" href="#mac-os-x" title="Permalink to this headline">∞</a></h3>
<p>When linking against <tt class="docutils literal"><span class="pre">libfdb_c.dylib</span></tt>, no additional libraries are required.</p>
</div>
<div class="section" id="windows">
<h3>Windows<a class="headerlink" href="#windows" title="Permalink to this headline">∞</a></h3>
<p>When building a program with Visual Studio that uses this API, the Import Library <tt class="docutils literal"><span class="pre">fdb_c.lib</span></tt> must be added to the Project as an Additional Dependency in the Linker Inputs.</p>
</div>
</div>
<div class="section" id="api-versioning">
<h2>API versioning<a class="headerlink" href="#api-versioning" title="Permalink to this headline">∞</a></h2>
<p>Prior to including <tt class="docutils literal"><span class="pre">fdb_c.h</span></tt>, you must define the <tt class="xref c c-macro docutils literal"><span class="pre">FDB_API_VERSION</span></tt> macro. This, together with the <a class="reference internal" href="#c.fdb_select_api_version" title="fdb_select_api_version"><tt class="xref c c-func docutils literal"><span class="pre">fdb_select_api_version()</span></tt></a> function, allows programs written against an older version of the API to compile and run with newer versions of the C library. The current version of the FoundationDB C API is 300.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#define FDB_API_VERSION 300</span>
<span class="cp">#include &lt;foundationdb/fdb_c.h&gt;</span>
</pre></div>
</div>
<dl class="function">
<dt id="c.fdb_select_api_version">
<a class="reference internal" href="#c.fdb_error_t" title="fdb_error_t">fdb_error_t</a> <tt class="descname">fdb_select_api_version</tt><big>(</big>int<em>&nbsp;version</em><big>)</big><a class="headerlink" href="#c.fdb_select_api_version" title="Permalink to this definition">∞</a></dt>
<dd><p>Must be called before any other API functions. <tt class="xref c c-data docutils literal"><span class="pre">version</span></tt> must be less than or equal to <tt class="xref c c-macro docutils literal"><span class="pre">FDB_API_VERSION</span></tt> (and should almost always be equal).</p>
<p>Language bindings implemented in C which themselves expose API versioning will usually pass the version requested by the application, instead of always passing <tt class="xref c c-macro docutils literal"><span class="pre">FDB_API_VERSION</span></tt>.</p>
<p>Passing a version less than <tt class="xref c c-macro docutils literal"><span class="pre">FDB_API_VERSION</span></tt> will cause the API to behave as it did in the older version.</p>
<p>It is an error to call this function after it has returned successfully. It is not thread safe, and if called from more than one thread simultaneously its behavior is undefined.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is actually implemented as a macro. If you are accessing this API via <tt class="xref c c-func docutils literal"><span class="pre">dlopen()</span></tt> or an FFI, you will need to use <a class="reference internal" href="#c.fdb_select_api_version_impl" title="fdb_select_api_version_impl"><tt class="xref c c-func docutils literal"><span class="pre">fdb_select_api_version_impl()</span></tt></a>.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="c.fdb_select_api_version_impl">
<a class="reference internal" href="#c.fdb_error_t" title="fdb_error_t">fdb_error_t</a> <tt class="descname">fdb_select_api_version_impl</tt><big>(</big>int<em>&nbsp;runtime_version</em>, int<em>&nbsp;header_version</em><big>)</big><a class="headerlink" href="#c.fdb_select_api_version_impl" title="Permalink to this definition">∞</a></dt>
<dd><p>This is the actual entry point called by the <a class="reference internal" href="#c.fdb_select_api_version" title="fdb_select_api_version"><tt class="xref c c-func docutils literal"><span class="pre">fdb_select_api_version()</span></tt></a> macro. It should never be called directly from C, but if you are accessing this API via <tt class="xref c c-func docutils literal"><span class="pre">dlopen()</span></tt> or an FFI, you will need to use it. <tt class="docutils literal"><span class="pre">fdb_select_api_version(v)</span></tt> is equivalent to <tt class="docutils literal"><span class="pre">fdb_select_api_version_impl(v,</span> <span class="pre">FDB_API_VERSION)</span></tt>.</p>
<p>It is an error to call this function after it has returned successfully. It is not thread safe, and if called from more than one thread simultaneously its behavior is undefined.</p>
<dl class="docutils">
<dt><tt class="xref c c-data docutils literal"><span class="pre">runtime_version</span></tt></dt>
<dd><p class="first">The version of run-time behavior the API is requested to provide. Must be less than or equal to <tt class="xref c c-data docutils literal"><span class="pre">header_version</span></tt>, and should almost always be equal.</p>
<p class="last">Language bindings which themselves expose API versioning will usually pass the version requested by the application.</p>
</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">header_version</span></tt></dt>
<dd>The version of the ABI (application binary interface) that the calling code expects to find in the shared library. If you are using an FFI, this <em>must</em> correspond to the version of the API you are using as a reference (currently 300). For example, the number of arguments that a function takes may be affected by this value, and an incorrect value is unlikely to yield success.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.fdb_get_max_api_version">
int <tt class="descname">fdb_get_max_api_version</tt><big>(</big><big>)</big><a class="headerlink" href="#c.fdb_get_max_api_version" title="Permalink to this definition">∞</a></dt>
<dd><p>Returns <tt class="docutils literal"><span class="pre">FDB_API_VERSION</span></tt>, the current version of the FoundationDB C API.  This is the maximum version that may be passed to <a class="reference internal" href="#c.fdb_select_api_version" title="fdb_select_api_version"><tt class="xref c c-func docutils literal"><span class="pre">fdb_select_api_version()</span></tt></a>.</p>
</dd></dl>

</div>
<div class="section" id="network">
<h2>Network<a class="headerlink" href="#network" title="Permalink to this headline">∞</a></h2>
<p>The FoundationDB client library performs most tasks on a singleton thread (which usually will be a different thread than your application runs on). These functions are used to configure, start and stop the FoundationDB event loop on this thread.</p>
<dl class="function">
<dt id="c.fdb_network_set_option">
<a class="reference internal" href="#c.fdb_error_t" title="fdb_error_t">fdb_error_t</a> <tt class="descname">fdb_network_set_option</tt><big>(</big><a class="reference internal" href="#c.FDBNetworkOption" title="FDBNetworkOption">FDBNetworkOption</a><em>&nbsp;option</em>, uint8_t const*<em>&nbsp;value</em>, int<em>&nbsp;value_length</em><big>)</big><a class="headerlink" href="#c.fdb_network_set_option" title="Permalink to this definition">∞</a></dt>
<dd><p>Called to set network options. If the given option is documented as taking a parameter, you must also pass a pointer to the parameter value and the parameter value&#8217;s length. If the option is documented as taking an <tt class="docutils literal"><span class="pre">Int</span></tt> parameter, <tt class="docutils literal"><span class="pre">value</span></tt> must point to a signed 64-bit integer (little-endian), and <tt class="docutils literal"><span class="pre">value_length</span></tt> must be 8. This memory only needs to be valid until <a class="reference internal" href="#c.fdb_network_set_option" title="fdb_network_set_option"><tt class="xref c c-func docutils literal"><span class="pre">fdb_network_set_option()</span></tt></a> returns.</p>
</dd></dl>

<dl class="type">
<dt id="c.FDBNetworkOption">
<tt class="descname">FDBNetworkOption</tt><a class="headerlink" href="#c.FDBNetworkOption" title="Permalink to this definition">∞</a></dt>
<dd><p>Please see <tt class="docutils literal"><span class="pre">fdb_c_options.g.h</span></tt> for a definition of this type, along with documentation of its allowed values.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_setup_network">
<a class="reference internal" href="#c.fdb_error_t" title="fdb_error_t">fdb_error_t</a> <tt class="descname">fdb_setup_network</tt><big>(</big><big>)</big><a class="headerlink" href="#c.fdb_setup_network" title="Permalink to this definition">∞</a></dt>
<dd><p>Must be called after <a class="reference internal" href="#c.fdb_select_api_version" title="fdb_select_api_version"><tt class="xref c c-func docutils literal"><span class="pre">fdb_select_api_version()</span></tt></a> (and zero or more calls to <a class="reference internal" href="#c.fdb_network_set_option" title="fdb_network_set_option"><tt class="xref c c-func docutils literal"><span class="pre">fdb_network_set_option()</span></tt></a>) and before any other function in this API. <a class="reference internal" href="#c.fdb_setup_network" title="fdb_setup_network"><tt class="xref c c-func docutils literal"><span class="pre">fdb_setup_network()</span></tt></a> can only be called once.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_run_network">
<a class="reference internal" href="#c.fdb_error_t" title="fdb_error_t">fdb_error_t</a> <tt class="descname">fdb_run_network</tt><big>(</big><big>)</big><a class="headerlink" href="#c.fdb_run_network" title="Permalink to this definition">∞</a></dt>
<dd><p>Must be called after <a class="reference internal" href="#c.fdb_setup_network" title="fdb_setup_network"><tt class="xref c c-func docutils literal"><span class="pre">fdb_setup_network()</span></tt></a> before any asynchronous functions in this API can be expected to complete. Unless your program is entirely event-driven based on results of asynchronous functions in this API and has no event loop of its own, you will want to invoke this function on an auxiliary thread (which it is your responsibility to create).</p>
<p>This function will not return until <a class="reference internal" href="#c.fdb_stop_network" title="fdb_stop_network"><tt class="xref c c-func docutils literal"><span class="pre">fdb_stop_network()</span></tt></a> is called by you or a serious error occurs. You must not invoke <a class="reference internal" href="#c.fdb_run_network" title="fdb_run_network"><tt class="xref c c-func docutils literal"><span class="pre">fdb_run_network()</span></tt></a> concurrently or reentrantly while it is already running.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_stop_network">
<a class="reference internal" href="#c.fdb_error_t" title="fdb_error_t">fdb_error_t</a> <tt class="descname">fdb_stop_network</tt><big>(</big><big>)</big><a class="headerlink" href="#c.fdb_stop_network" title="Permalink to this definition">∞</a></dt>
<dd><p>Signals the event loop invoked by <a class="reference internal" href="#c.fdb_run_network" title="fdb_run_network"><tt class="xref c c-func docutils literal"><span class="pre">fdb_run_network()</span></tt></a> to terminate. You must call this function <strong>and wait for</strong> <a class="reference internal" href="#c.fdb_run_network" title="fdb_run_network"><tt class="xref c c-func docutils literal"><span class="pre">fdb_run_network()</span></tt></a> <strong>to return</strong> before allowing your program to exit, or else the behavior is undefined. For example, when running <a class="reference internal" href="#c.fdb_run_network" title="fdb_run_network"><tt class="xref c c-func docutils literal"><span class="pre">fdb_run_network()</span></tt></a> on a thread (using pthread), this will look like:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="kt">pthread_t</span> <span class="n">network_thread</span><span class="p">;</span> <span class="cm">/* handle for thread which invoked fdb_run_network() */</span>
<span class="kt">int</span> <span class="n">err</span><span class="p">;</span>

<span class="p">...</span>

<span class="n">err</span> <span class="o">=</span> <span class="n">fdb_stop_network</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span> <span class="n">err</span> <span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* An error occurred (probably network not running) */</span>
<span class="p">}</span>
<span class="n">err</span> <span class="o">=</span> <span class="n">pthread_join</span><span class="p">(</span> <span class="n">network_thread</span><span class="p">,</span> <span class="nb">NULL</span> <span class="p">);</span>
<span class="k">if</span> <span class="p">(</span> <span class="n">err</span> <span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* Unknown error */</span>
<span class="p">}</span>
<span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
<p>This function may be called from any thread. Once the network is stopped it cannot be restarted during the lifetime of the running program.</p>
</dd></dl>

</div>
<div class="section" id="future">
<h2>Future<a class="headerlink" href="#future" title="Permalink to this headline">∞</a></h2>
<p>Most functions in the FoundationDB API are asynchronous, meaning that they may return to the caller before actually delivering their result. These functions always return <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture*</span></tt></a>. An <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> object represents a result value or error to be delivered at some future time. You can wait for a Future to be &#8220;ready&#8221; &#8211; to have a value or error delivered &#8211; by setting a callback function, or by blocking a thread, or by polling. Once a Future is ready, you can extract either an error code or a value of the appropriate type (the documentation for the original function will tell you which <tt class="xref c c-func docutils literal"><span class="pre">fdb_future_get_*()</span></tt> function you should call).</p>
<p>To use the API in a synchronous way, you would typically do something like this for each asynchronous call:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">// Call an API that returns FDBFuture*, documented as returning type foo in the future</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">fdb_something</span><span class="p">();</span>

<span class="c1">// Wait for the Future to be *ready*</span>
<span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="n">fdb_future_block_until_ready</span><span class="p">(</span><span class="n">f</span><span class="p">))</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Exceptional error (e.g. out of memory)</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="n">err</span> <span class="o">=</span> <span class="n">fdb_future_get_foo</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Use result</span>
    <span class="c1">// In some cases, you must be finished with result before calling</span>
    <span class="c1">// fdb_future_destroy() (see the documentation for the specific</span>
    <span class="c1">// fdb_future_get_*() method)</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// Handle the error. If this is an error in a transaction, see</span>
    <span class="c1">// fdb_transaction_on_error()</span>
<span class="p">}</span>

<span class="n">fdb_future_destroy</span><span class="p">(</span><span class="n">f</span><span class="p">);</span>
</pre></div>
</div>
<p>Futures make it easy to do multiple operations in parallel, by calling several asynchronous functions before waiting for any of the results. This can be important for reducing the latency of transactions.</p>
<p>See <a class="reference internal" href="developer-guide.html#developer-guide-programming-with-futures"><em>Programming with futures</em></a> for further (language-independent) discussion.</p>
<dl class="type">
<dt id="c.FDBFuture">
<tt class="descname">FDBFuture</tt><a class="headerlink" href="#c.FDBFuture" title="Permalink to this definition">∞</a></dt>
<dd><p>An opaque type that represents a Future in the FoundationDB C API.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_future_cancel">
void <tt class="descname">fdb_future_cancel</tt><big>(</big><a class="reference internal" href="#c.FDBFuture" title="FDBFuture">FDBFuture</a>*<em>&nbsp;future</em><big>)</big><a class="headerlink" href="#c.fdb_future_cancel" title="Permalink to this definition">∞</a></dt>
<dd><p>Cancels an <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> object and its associated asynchronous operation. If called before the future is ready, attempts to access its value will return an <a class="reference internal" href="api-error-codes.html#developer-guide-error-codes"><em>operation_cancelled</em></a> error. Cancelling a future which is already ready has no effect. Note that even if a future is not ready, its associated asynchronous operation may have succesfully completed and be unable to be cancelled.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_future_destroy">
void <tt class="descname">fdb_future_destroy</tt><big>(</big><a class="reference internal" href="#c.FDBFuture" title="FDBFuture">FDBFuture</a>*<em>&nbsp;future</em><big>)</big><a class="headerlink" href="#c.fdb_future_destroy" title="Permalink to this definition">∞</a></dt>
<dd><p>Destroys an <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> object. It must be called exactly once for each FDBFuture* returned by an API function. It may be called before or after the future is ready. It will also cancel the future (and its associated operation if the latter is still outstanding).</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_future_block_until_ready">
<a class="reference internal" href="#c.fdb_error_t" title="fdb_error_t">fdb_error_t</a> <tt class="descname">fdb_future_block_until_ready</tt><big>(</big><a class="reference internal" href="#c.FDBFuture" title="FDBFuture">FDBFuture</a>*<em>&nbsp;future</em><big>)</big><a class="headerlink" href="#c.fdb_future_block_until_ready" title="Permalink to this definition">∞</a></dt>
<dd><p>Blocks the calling thread until the given Future is ready. It will return success even if the Future is set to an error &#8211; you must call <a class="reference internal" href="#c.fdb_future_get_error" title="fdb_future_get_error"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_get_error()</span></tt></a> to determine that. <a class="reference internal" href="#c.fdb_future_block_until_ready" title="fdb_future_block_until_ready"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_block_until_ready()</span></tt></a> will return an error only in exceptional conditions (e.g. out of memory or other operating system resources).</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Never call this function from a callback passed to <a class="reference internal" href="#c.fdb_future_set_callback" title="fdb_future_set_callback"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_set_callback()</span></tt></a>. This may block the thread on which <a class="reference internal" href="#c.fdb_run_network" title="fdb_run_network"><tt class="xref c c-func docutils literal"><span class="pre">fdb_run_network()</span></tt></a> was invoked, resulting in a deadlock.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="c.fdb_future_is_ready">
<a class="reference internal" href="#c.fdb_bool_t" title="fdb_bool_t">fdb_bool_t</a> <tt class="descname">fdb_future_is_ready</tt><big>(</big><a class="reference internal" href="#c.FDBFuture" title="FDBFuture">FDBFuture</a>*<em>&nbsp;future</em><big>)</big><a class="headerlink" href="#c.fdb_future_is_ready" title="Permalink to this definition">∞</a></dt>
<dd><p>Returns non-zero if the Future is ready. A Future is ready if it has been set to a value or an error.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_future_set_callback">
<a class="reference internal" href="#c.fdb_error_t" title="fdb_error_t">fdb_error_t</a> <tt class="descname">fdb_future_set_callback</tt><big>(</big><a class="reference internal" href="#c.FDBFuture" title="FDBFuture">FDBFuture</a>*<em>&nbsp;future</em>, <a class="reference internal" href="#c.FDBCallback" title="FDBCallback">FDBCallback</a><em>&nbsp;callback</em>, void*<em>&nbsp;callback_parameter</em><big>)</big><a class="headerlink" href="#c.fdb_future_set_callback" title="Permalink to this definition">∞</a></dt>
<dd><p>Causes the <a class="reference internal" href="#c.FDBCallback" title="FDBCallback"><tt class="xref c c-type docutils literal"><span class="pre">FDBCallback</span></tt></a> function to be invoked as <tt class="docutils literal"><span class="pre">callback(future,</span> <span class="pre">callback_parameter)</span></tt> when the given Future is ready. If the Future is already ready, the call may occur in the current thread before this function returns (but this behavior is not guaranteed). Alternatively, the call may be delayed indefinitely and take place on the thread on which <a class="reference internal" href="#c.fdb_run_network" title="fdb_run_network"><tt class="xref c c-func docutils literal"><span class="pre">fdb_run_network()</span></tt></a> was invoked, and the callback is responsible for any necessary thread synchronization (and/or for posting work back to your application event loop, thread pool, etc. if your application&#8217;s architecture calls for that).</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Never call <a class="reference internal" href="#c.fdb_future_block_until_ready" title="fdb_future_block_until_ready"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_block_until_ready()</span></tt></a> from a callback passed to this function. This may block the thread on which <a class="reference internal" href="#c.fdb_run_network" title="fdb_run_network"><tt class="xref c c-func docutils literal"><span class="pre">fdb_run_network()</span></tt></a> was invoked, resulting in a deadlock.</p>
</div>
</dd></dl>

<dl class="type">
<dt id="c.FDBCallback">
<tt class="descname">FDBCallback</tt><a class="headerlink" href="#c.FDBCallback" title="Permalink to this definition">∞</a></dt>
<dd><p>A pointer to a function which takes <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture*</span></tt></a> and <tt class="xref c c-type docutils literal"><span class="pre">void*</span></tt> and returns <tt class="xref c c-type docutils literal"><span class="pre">void</span></tt>.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_future_release_memory">
void <tt class="descname">fdb_future_release_memory</tt><big>(</big><a class="reference internal" href="#c.FDBFuture" title="FDBFuture">FDBFuture</a>*<em>&nbsp;future</em><big>)</big><a class="headerlink" href="#c.fdb_future_release_memory" title="Permalink to this definition">∞</a></dt>
<dd><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This function provides no benefit to most application code. It is designed for use in writing generic, thread-safe language bindings. Applications should normally call <a class="reference internal" href="#c.fdb_future_destroy" title="fdb_future_destroy"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_destroy()</span></tt></a> only.</p>
</div>
<p>This function may only be called after a successful (zero return value) call to <a class="reference internal" href="#c.fdb_future_get_key" title="fdb_future_get_key"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_get_key()</span></tt></a>, <a class="reference internal" href="#c.fdb_future_get_value" title="fdb_future_get_value"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_get_value()</span></tt></a>, or <a class="reference internal" href="#c.fdb_future_get_keyvalue_array" title="fdb_future_get_keyvalue_array"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_get_keyvalue_array()</span></tt></a>. It indicates that the memory returned by the prior get call is no longer needed by the application. After this function has been called the same number of times as <tt class="docutils literal"><span class="pre">fdb_future_get_*()</span></tt>, further calls to <tt class="docutils literal"><span class="pre">fdb_future_get_*()</span></tt> will return a <a class="reference internal" href="api-error-codes.html#developer-guide-error-codes"><em>future_released</em></a> error. It is still necessary to later destroy the future with <a class="reference internal" href="#c.fdb_future_destroy" title="fdb_future_destroy"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_destroy()</span></tt></a>.</p>
<p>Calling this function is optional, since <a class="reference internal" href="#c.fdb_future_destroy" title="fdb_future_destroy"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_destroy()</span></tt></a> will also release the memory returned by get functions. However, <a class="reference internal" href="#c.fdb_future_release_memory" title="fdb_future_release_memory"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_release_memory()</span></tt></a> leaves the future object itself intact and provides a specific error code which can be used for coordination by multiple threads racing to do something with the results of a specific future. This has proven helpful in writing binding code.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_future_get_error">
<a class="reference internal" href="#c.fdb_error_t" title="fdb_error_t">fdb_error_t</a> <tt class="descname">fdb_future_get_error</tt><big>(</big><a class="reference internal" href="#c.FDBFuture" title="FDBFuture">FDBFuture</a>*<em>&nbsp;future</em><big>)</big><a class="headerlink" href="#c.fdb_future_get_error" title="Permalink to this definition">∞</a></dt>
<dd><p>Returns zero if <tt class="xref c c-data docutils literal"><span class="pre">future</span></tt> is ready and not in an error state, and a non-zero <a class="reference internal" href="api-error-codes.html#developer-guide-error-codes"><em>error code</em></a> otherwise.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_future_get_version">
<a class="reference internal" href="#c.fdb_error_t" title="fdb_error_t">fdb_error_t</a> <tt class="descname">fdb_future_get_version</tt><big>(</big><a class="reference internal" href="#c.FDBFuture" title="FDBFuture">FDBFuture</a>*<em>&nbsp;future</em>, int64_t*<em>&nbsp;out_version</em><big>)</big><a class="headerlink" href="#c.fdb_future_get_version" title="Permalink to this definition">∞</a></dt>
<dd><p>Extracts a value of type version from an <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> into a caller-provided variable of type <tt class="xref c c-type docutils literal"><span class="pre">int64_t</span></tt>. <tt class="xref c c-data docutils literal"><span class="pre">future</span></tt> must represent a result of the appropriate type (i.e. must have been returned by a function documented as returning this type), or the results are undefined.</p>
<p>Returns zero if <tt class="xref c c-data docutils literal"><span class="pre">future</span></tt> is ready and not in an error state, and a non-zero <a class="reference internal" href="api-error-codes.html#developer-guide-error-codes"><em>error code</em></a> otherwise (in which case the value of any out parameter is undefined).</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_future_get_key">
<a class="reference internal" href="#c.fdb_error_t" title="fdb_error_t">fdb_error_t</a> <tt class="descname">fdb_future_get_key</tt><big>(</big><a class="reference internal" href="#c.FDBFuture" title="FDBFuture">FDBFuture</a>*<em>&nbsp;future</em>, uint8_t const**<em>&nbsp;out_key</em>, int*<em>&nbsp;out_key_length</em><big>)</big><a class="headerlink" href="#c.fdb_future_get_key" title="Permalink to this definition">∞</a></dt>
<dd><p>Extracts a value of type key from an <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> into caller-provided variables of type <tt class="xref c c-type docutils literal"><span class="pre">uint8_t*</span></tt> (a pointer to the beginning of the key) and <tt class="xref c c-type docutils literal"><span class="pre">int</span></tt> (the length of the key). <tt class="xref c c-data docutils literal"><span class="pre">future</span></tt> must represent a result of the appropriate type (i.e. must have been returned by a function documented as returning this type), or the results are undefined.</p>
<p>Returns zero if <tt class="xref c c-data docutils literal"><span class="pre">future</span></tt> is ready and not in an error state, and a non-zero <a class="reference internal" href="api-error-codes.html#developer-guide-error-codes"><em>error code</em></a> otherwise (in which case the value of any out parameter is undefined).</p>
<p>The memory referenced by the result is owned by the <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> object and will be valid until either <tt class="docutils literal"><span class="pre">fdb_future_destroy(future)</span></tt> or <tt class="docutils literal"><span class="pre">fdb_future_release_memory(future)</span></tt> is called.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_future_get_cluster">
<a class="reference internal" href="#c.fdb_error_t" title="fdb_error_t">fdb_error_t</a> <tt class="descname">fdb_future_get_cluster</tt><big>(</big><a class="reference internal" href="#c.FDBFuture" title="FDBFuture">FDBFuture</a>*<em>&nbsp;future</em>, <a class="reference internal" href="#c.FDBCluster" title="FDBCluster">FDBCluster</a>**<em>&nbsp;out_cluster</em><big>)</big><a class="headerlink" href="#c.fdb_future_get_cluster" title="Permalink to this definition">∞</a></dt>
<dd><p>Extracts a value of type <a class="reference internal" href="#c.FDBCluster" title="FDBCluster"><tt class="xref c c-type docutils literal"><span class="pre">FDBCluster*</span></tt></a> from an <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> into a caller-provided variable. <tt class="xref c c-data docutils literal"><span class="pre">future</span></tt> must represent a result of the appropriate type (i.e. must have been returned by a function documented as returning this type), or the results are undefined.</p>
<p>Returns zero if <tt class="xref c c-data docutils literal"><span class="pre">future</span></tt> is ready and not in an error state, and a non-zero <a class="reference internal" href="api-error-codes.html#developer-guide-error-codes"><em>error code</em></a> otherwise (in which case the value of any out parameter is undefined).</p>
<p>This function may only be called once on a given <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> object, as it transfers ownership of the <a class="reference internal" href="#c.FDBCluster" title="FDBCluster"><tt class="xref c c-type docutils literal"><span class="pre">FDBCluster</span></tt></a> to the caller. The caller is responsible for calling <a class="reference internal" href="#c.fdb_cluster_destroy" title="fdb_cluster_destroy"><tt class="xref c c-func docutils literal"><span class="pre">fdb_cluster_destroy()</span></tt></a> when finished with the result.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_future_get_database">
<a class="reference internal" href="#c.fdb_error_t" title="fdb_error_t">fdb_error_t</a> <tt class="descname">fdb_future_get_database</tt><big>(</big><a class="reference internal" href="#c.FDBFuture" title="FDBFuture">FDBFuture</a>*<em>&nbsp;future</em>, <a class="reference internal" href="#c.FDBDatabase" title="FDBDatabase">FDBDatabase</a>**<em>&nbsp;out_database</em><big>)</big><a class="headerlink" href="#c.fdb_future_get_database" title="Permalink to this definition">∞</a></dt>
<dd><p>Extracts a value of type <a class="reference internal" href="#c.FDBDatabase" title="FDBDatabase"><tt class="xref c c-type docutils literal"><span class="pre">FDBDatabase*</span></tt></a> from an <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> into a caller-provided variable. <tt class="xref c c-data docutils literal"><span class="pre">future</span></tt> must represent a result of the appropriate type (i.e. must have been returned by a function documented as returning this type), or the results are undefined.</p>
<p>Returns zero if <tt class="xref c c-data docutils literal"><span class="pre">future</span></tt> is ready and not in an error state, and a non-zero <a class="reference internal" href="api-error-codes.html#developer-guide-error-codes"><em>error code</em></a> otherwise (in which case the value of any out parameter is undefined).</p>
<p>This function may only be called once on a given <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> object, as it transfers ownership of the <a class="reference internal" href="#c.FDBDatabase" title="FDBDatabase"><tt class="xref c c-type docutils literal"><span class="pre">FDBDatabase</span></tt></a> to the caller. The caller is responsible for calling <tt class="docutils literal"><span class="pre">fdb_database_destroy(*out_database)</span></tt> when finished with the result.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_future_get_value">
<a class="reference internal" href="#c.fdb_error_t" title="fdb_error_t">fdb_error_t</a> <tt class="descname">fdb_future_get_value</tt><big>(</big><a class="reference internal" href="#c.FDBFuture" title="FDBFuture">FDBFuture</a>*<em>&nbsp;future</em>, <a class="reference internal" href="#c.fdb_bool_t" title="fdb_bool_t">fdb_bool_t</a>*<em>&nbsp;out_present</em>, uint8_t const**<em>&nbsp;out_value</em>, int*<em>&nbsp;out_value_length</em><big>)</big><a class="headerlink" href="#c.fdb_future_get_value" title="Permalink to this definition">∞</a></dt>
<dd><p>Extracts a database value from an <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> into caller-provided variables. <tt class="xref c c-data docutils literal"><span class="pre">future</span></tt> must represent a result of the appropriate type (i.e. must have been returned by a function documented as returning this type), or the results are undefined.</p>
<p>Returns zero if <tt class="xref c c-data docutils literal"><span class="pre">future</span></tt> is ready and not in an error state, and a non-zero <a class="reference internal" href="api-error-codes.html#developer-guide-error-codes"><em>error code</em></a> otherwise (in which case the value of any out parameter is undefined).</p>
<dl class="docutils">
<dt><tt class="xref c c-data docutils literal"><span class="pre">*out_present</span></tt></dt>
<dd>Set to non-zero if (and only if) the requested value was present in the database. (If zero, the other outputs are meaningless.)</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">*out_value</span></tt></dt>
<dd>Set to point to the first byte of the value.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">*out_value_length</span></tt></dt>
<dd>Set to the length of the value (in bytes).</dd>
</dl>
<p>The memory referenced by the result is owned by the <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> object and will be valid until either <tt class="docutils literal"><span class="pre">fdb_future_destroy(future)</span></tt> or <tt class="docutils literal"><span class="pre">fdb_future_release_memory(future)</span></tt> is called.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_future_get_string_array">
<a class="reference internal" href="#c.fdb_error_t" title="fdb_error_t">fdb_error_t</a> <tt class="descname">fdb_future_get_string_array</tt><big>(</big><a class="reference internal" href="#c.FDBFuture" title="FDBFuture">FDBFuture</a>*<em>&nbsp;future</em>, const char***<em>&nbsp;out_strings</em>, int*<em>&nbsp;out_count</em><big>)</big><a class="headerlink" href="#c.fdb_future_get_string_array" title="Permalink to this definition">∞</a></dt>
<dd><p>Extracts an array of null-terminated C strings from an <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> into caller-provided variables. <tt class="xref c c-data docutils literal"><span class="pre">future</span></tt> must represent a result of the appropriate type (i.e. must have been returned by a function documented as returning this type), or the results are undefined.</p>
<p>Returns zero if <tt class="xref c c-data docutils literal"><span class="pre">future</span></tt> is ready and not in an error state, and a non-zero <a class="reference internal" href="api-error-codes.html#developer-guide-error-codes"><em>error code</em></a> otherwise (in which case the value of any out parameter is undefined).</p>
<dl class="docutils">
<dt><tt class="xref c c-data docutils literal"><span class="pre">*out_strings</span></tt></dt>
<dd>Set to point to the first string in the array.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">*out_count</span></tt></dt>
<dd>Set to the number of strings in the array.</dd>
</dl>
<p>The memory referenced by the result is owned by the <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> object and will be valid until either <tt class="docutils literal"><span class="pre">fdb_future_destroy(future)</span></tt> or <tt class="docutils literal"><span class="pre">fdb_future_release_memory(future)</span></tt> is called.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_future_get_keyvalue_array">
<a class="reference internal" href="#c.fdb_error_t" title="fdb_error_t">fdb_error_t</a> <tt class="descname">fdb_future_get_keyvalue_array</tt><big>(</big><a class="reference internal" href="#c.FDBFuture" title="FDBFuture">FDBFuture</a>*<em>&nbsp;future</em>, <a class="reference internal" href="#c.FDBKeyValue" title="FDBKeyValue">FDBKeyValue</a> const**<em>&nbsp;out_kv</em>, int*<em>&nbsp;out_count</em>, <a class="reference internal" href="#c.fdb_bool_t" title="fdb_bool_t">fdb_bool_t</a>*<em>&nbsp;out_more</em><big>)</big><a class="headerlink" href="#c.fdb_future_get_keyvalue_array" title="Permalink to this definition">∞</a></dt>
<dd><p>Extracts an array of <a class="reference internal" href="#c.FDBKeyValue" title="FDBKeyValue"><tt class="xref c c-type docutils literal"><span class="pre">FDBKeyValue</span></tt></a> objects from an <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> into caller-provided variables. <tt class="xref c c-data docutils literal"><span class="pre">future</span></tt> must represent a result of the appropriate type (i.e. must have been returned by a function documented as returning this type), or the results are undefined.</p>
<p>Returns zero if <tt class="xref c c-data docutils literal"><span class="pre">future</span></tt> is ready and not in an error state, and a non-zero <a class="reference internal" href="api-error-codes.html#developer-guide-error-codes"><em>error code</em></a> otherwise (in which case the value of any out parameter is undefined).</p>
<dl class="docutils">
<dt><tt class="xref c c-data docutils literal"><span class="pre">*out_kv</span></tt></dt>
<dd>Set to point to the first <a class="reference internal" href="#c.FDBKeyValue" title="FDBKeyValue"><tt class="xref c c-type docutils literal"><span class="pre">FDBKeyValue</span></tt></a> object in the array.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">*out_count</span></tt></dt>
<dd>Set to the number of <a class="reference internal" href="#c.FDBKeyValue" title="FDBKeyValue"><tt class="xref c c-type docutils literal"><span class="pre">FDBKeyValue</span></tt></a> objects in the array.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">*out_more</span></tt></dt>
<dd>Set to true if (but not necessarily only if) values remain in the <em>key</em> range requested (possibly beyond the limits requested).</dd>
</dl>
<p>The memory referenced by the result is owned by the <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> object and will be valid until either <tt class="docutils literal"><span class="pre">fdb_future_destroy(future)</span></tt> or <tt class="docutils literal"><span class="pre">fdb_future_release_memory(future)</span></tt> is called.</p>
</dd></dl>

<dl class="type">
<dt id="c.FDBKeyValue">
<tt class="descname">FDBKeyValue</tt><a class="headerlink" href="#c.FDBKeyValue" title="Permalink to this definition">∞</a></dt>
<dd><p>Represents a single key-value pair in the output of <a class="reference internal" href="#c.fdb_future_get_keyvalue_array" title="fdb_future_get_keyvalue_array"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_get_keyvalue_array()</span></tt></a>.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span> <span class="n">key</span><span class="p">;</span>
    <span class="kt">int</span>         <span class="n">key_length</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span> <span class="n">value</span><span class="p">;</span>
    <span class="kt">int</span>         <span class="n">value_length</span><span class="p">;</span>
<span class="p">}</span> <span class="n">FDBKeyValue</span><span class="p">;</span>
</pre></div>
</div>
<dl class="docutils">
<dt><tt class="xref c c-data docutils literal"><span class="pre">key</span></tt></dt>
<dd>A pointer to a key.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">key_length</span></tt></dt>
<dd>The length of the key pointed to by <tt class="xref c c-data docutils literal"><span class="pre">key</span></tt>.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">value</span></tt></dt>
<dd>A pointer to a value.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">value_length</span></tt></dt>
<dd>The length of the value pointed to by <tt class="xref c c-data docutils literal"><span class="pre">value</span></tt>.</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="cluster">
<h2>Cluster<a class="headerlink" href="#cluster" title="Permalink to this headline">∞</a></h2>
<dl class="type">
<dt id="c.FDBCluster">
<tt class="descname">FDBCluster</tt><a class="headerlink" href="#c.FDBCluster" title="Permalink to this definition">∞</a></dt>
<dd><p>An opaque type that represents a Cluster in the FoundationDB C API.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_create_cluster">
<a class="reference internal" href="#c.FDBFuture" title="FDBFuture">FDBFuture</a>* <tt class="descname">fdb_create_cluster</tt><big>(</big>const char*<em>&nbsp;cluster_file_path</em><big>)</big><a class="headerlink" href="#c.fdb_create_cluster" title="Permalink to this definition">∞</a></dt>
<dd><p>Returns an <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> which will be set to an <a class="reference internal" href="#c.FDBCluster" title="FDBCluster"><tt class="xref c c-type docutils literal"><span class="pre">FDBCluster</span></tt></a> object. You must first wait for the <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> to be ready, check for errors, call <a class="reference internal" href="#c.fdb_future_get_cluster" title="fdb_future_get_cluster"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_get_cluster()</span></tt></a> to extract the <a class="reference internal" href="#c.FDBCluster" title="FDBCluster"><tt class="xref c c-type docutils literal"><span class="pre">FDBCluster</span></tt></a> object, and then destroy the <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> with <a class="reference internal" href="#c.fdb_future_destroy" title="fdb_future_destroy"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_destroy()</span></tt></a>.</p>
<dl class="docutils">
<dt><tt class="xref c c-data docutils literal"><span class="pre">cluster_file_path</span></tt></dt>
<dd>A NULL-terminated string giving a local path of a <a class="reference internal" href="administration.html#foundationdb-cluster-file"><em>cluster file</em></a> (often called &#8216;fdb.cluster&#8217;) which contains connection information for the FoundationDB cluster. If cluster_file_path is NULL or an empty string, then a <a class="reference internal" href="administration.html#default-cluster-file"><em>default cluster file</em></a> will be used.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.fdb_cluster_destroy">
void <tt class="descname">fdb_cluster_destroy</tt><big>(</big><a class="reference internal" href="#c.FDBCluster" title="FDBCluster">FDBCluster</a>*<em>&nbsp;cluster</em><big>)</big><a class="headerlink" href="#c.fdb_cluster_destroy" title="Permalink to this definition">∞</a></dt>
<dd><p>Destroys an <a class="reference internal" href="#c.FDBCluster" title="FDBCluster"><tt class="xref c c-type docutils literal"><span class="pre">FDBCluster</span></tt></a> object. It must be called exactly once for each successful call to <a class="reference internal" href="#c.fdb_future_get_cluster" title="fdb_future_get_cluster"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_get_cluster()</span></tt></a>. This function only destroys a handle to the cluster &#8211; your cluster will be fine!</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_cluster_set_option">
<a class="reference internal" href="#c.fdb_error_t" title="fdb_error_t">fdb_error_t</a> <tt class="descname">fdb_cluster_set_option</tt><big>(</big><a class="reference internal" href="#c.FDBCluster" title="FDBCluster">FDBCluster</a>*<em>&nbsp;cluster</em>, <a class="reference internal" href="#c.FDBClusterOption" title="FDBClusterOption">FDBClusterOption</a><em>&nbsp;option</em>, uint8_t const*<em>&nbsp;value</em>, int<em>&nbsp;value_length</em><big>)</big><a class="headerlink" href="#c.fdb_cluster_set_option" title="Permalink to this definition">∞</a></dt>
<dd><p>Called to set an option on an <a class="reference internal" href="#c.FDBCluster" title="FDBCluster"><tt class="xref c c-type docutils literal"><span class="pre">FDBCluster</span></tt></a>. If the given option is documented as taking a parameter, you must also pass a pointer to the parameter value and the parameter value&#8217;s length. If the option is documented as taking an <tt class="docutils literal"><span class="pre">Int</span></tt> parameter, <tt class="docutils literal"><span class="pre">value</span></tt> must point to a signed 64-bit integer (little-endian), and <tt class="docutils literal"><span class="pre">value_length</span></tt> must be 8. This memory only needs to be valid until <a class="reference internal" href="#c.fdb_cluster_set_option" title="fdb_cluster_set_option"><tt class="xref c c-func docutils literal"><span class="pre">fdb_cluster_set_option()</span></tt></a> returns.</p>
</dd></dl>

<dl class="type">
<dt id="c.FDBClusterOption">
<tt class="descname">FDBClusterOption</tt><a class="headerlink" href="#c.FDBClusterOption" title="Permalink to this definition">∞</a></dt>
<dd><p>Please see <tt class="docutils literal"><span class="pre">fdb_c_options.g.h</span></tt> for a definition of this type, along with documentation of its allowed values.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_cluster_create_database">
<a class="reference internal" href="#c.FDBFuture" title="FDBFuture">FDBFuture</a>* <tt class="descname">fdb_cluster_create_database</tt><big>(</big><a class="reference internal" href="#c.FDBCluster" title="FDBCluster">FDBCluster</a><em>&nbsp;*cluster</em>, uint8_t const*<em>&nbsp;db_name</em>, int<em>&nbsp;db_name_length</em><big>)</big><a class="headerlink" href="#c.fdb_cluster_create_database" title="Permalink to this definition">∞</a></dt>
<dd><p>Returns an <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> which will be set to an <a class="reference internal" href="#c.FDBDatabase" title="FDBDatabase"><tt class="xref c c-type docutils literal"><span class="pre">FDBDatabase</span></tt></a> object. You must first wait for the <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> to be ready, check for errors, call <a class="reference internal" href="#c.fdb_future_get_database" title="fdb_future_get_database"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_get_database()</span></tt></a> to extract the <a class="reference internal" href="#c.FDBDatabase" title="FDBDatabase"><tt class="xref c c-type docutils literal"><span class="pre">FDBDatabase</span></tt></a> object, and then destroy the <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> with <a class="reference internal" href="#c.fdb_future_destroy" title="fdb_future_destroy"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_destroy()</span></tt></a>.</p>
<dl class="docutils">
<dt><tt class="xref c c-data docutils literal"><span class="pre">db_name</span></tt></dt>
<dd>A pointer to the name of the database to be opened. The value does not need to be NULL-terminated. In the current FoundationDB API, the database name <em>must</em> be &#8220;DB&#8221;.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">db_name_length</span></tt></dt>
<dd>The length of the parameter specified by <tt class="xref c c-data docutils literal"><span class="pre">db_name</span></tt>.</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="database">
<h2>Database<a class="headerlink" href="#database" title="Permalink to this headline">∞</a></h2>
<p>An <tt class="docutils literal"><span class="pre">FDBDatabase</span></tt> represents a FoundationDB database &#8212; a mutable, lexicographically ordered mapping from binary keys to binary values. Modifications to a database are performed via transactions.</p>
<dl class="type">
<dt id="c.FDBDatabase">
<tt class="descname">FDBDatabase</tt><a class="headerlink" href="#c.FDBDatabase" title="Permalink to this definition">∞</a></dt>
<dd><p>An opaque type that represents a database in the FoundationDB C API.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_database_destroy">
void <tt class="descname">fdb_database_destroy</tt><big>(</big><a class="reference internal" href="#c.FDBDatabase" title="FDBDatabase">FDBDatabase</a>*<em>&nbsp;database</em><big>)</big><a class="headerlink" href="#c.fdb_database_destroy" title="Permalink to this definition">∞</a></dt>
<dd><p>Destroys an <a class="reference internal" href="#c.FDBDatabase" title="FDBDatabase"><tt class="xref c c-type docutils literal"><span class="pre">FDBDatabase</span></tt></a> object. It must be called exactly once for each successful call to <a class="reference internal" href="#c.fdb_future_get_database" title="fdb_future_get_database"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_get_database()</span></tt></a>. This function only destroys a handle to the database &#8211; your database will be fine!</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_database_set_option">
<a class="reference internal" href="#c.fdb_error_t" title="fdb_error_t">fdb_error_t</a> <tt class="descname">fdb_database_set_option</tt><big>(</big><a class="reference internal" href="#c.FDBDatabase" title="FDBDatabase">FDBDatabase</a>*<em>&nbsp;database</em>, <a class="reference internal" href="#c.FDBDatabaseOption" title="FDBDatabaseOption">FDBDatabaseOption</a><em>&nbsp;option</em>, uint8_t const*<em>&nbsp;value</em>, int<em>&nbsp;value_length</em><big>)</big><a class="headerlink" href="#c.fdb_database_set_option" title="Permalink to this definition">∞</a></dt>
<dd><p>Called to set an option an on <a class="reference internal" href="#c.FDBDatabase" title="FDBDatabase"><tt class="xref c c-type docutils literal"><span class="pre">FDBDatabase</span></tt></a>. If the given option is documented as taking a parameter, you must also pass a pointer to the parameter value and the parameter value&#8217;s length. If the option is documented as taking an <tt class="docutils literal"><span class="pre">Int</span></tt> parameter, <tt class="docutils literal"><span class="pre">value</span></tt> must point to a signed 64-bit integer (little-endian), and <tt class="docutils literal"><span class="pre">value_length</span></tt> must be 8. This memory only needs to be valid until <a class="reference internal" href="#c.fdb_database_set_option" title="fdb_database_set_option"><tt class="xref c c-func docutils literal"><span class="pre">fdb_database_set_option()</span></tt></a> returns.</p>
</dd></dl>

<dl class="type">
<dt id="c.FDBDatabaseOption">
<tt class="descname">FDBDatabaseOption</tt><a class="headerlink" href="#c.FDBDatabaseOption" title="Permalink to this definition">∞</a></dt>
<dd><p>Please see <tt class="docutils literal"><span class="pre">fdb_c_options.g.h</span></tt> for a definition of this type, along with documentation of its allowed values.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_database_create_transaction">
<a class="reference internal" href="#c.fdb_error_t" title="fdb_error_t">fdb_error_t</a> <tt class="descname">fdb_database_create_transaction</tt><big>(</big><a class="reference internal" href="#c.FDBDatabase" title="FDBDatabase">FDBDatabase</a>*<em>&nbsp;database</em>, <a class="reference internal" href="#c.FDBTransaction" title="FDBTransaction">FDBTransaction</a>**<em>&nbsp;out_transaction</em><big>)</big><a class="headerlink" href="#c.fdb_database_create_transaction" title="Permalink to this definition">∞</a></dt>
<dd><p>Creates a new transaction on the given database. The caller assumes ownership of the <a class="reference internal" href="#c.FDBTransaction" title="FDBTransaction"><tt class="xref c c-type docutils literal"><span class="pre">FDBTransaction</span></tt></a> object and must destroy it with <a class="reference internal" href="#c.fdb_transaction_destroy" title="fdb_transaction_destroy"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_destroy()</span></tt></a>.</p>
<dl class="docutils">
<dt><tt class="xref c c-data docutils literal"><span class="pre">*out_transaction</span></tt></dt>
<dd>Set to point to the newly created <a class="reference internal" href="#c.FDBTransaction" title="FDBTransaction"><tt class="xref c c-type docutils literal"><span class="pre">FDBTransaction</span></tt></a>.</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="transaction">
<h2>Transaction<a class="headerlink" href="#transaction" title="Permalink to this headline">∞</a></h2>
<p>In FoundationDB, a transaction is a mutable snapshot of a database. All read and write operations on a transaction see and modify an otherwise-unchanging version of the database and only change the underlying database if and when the transaction is committed. Read operations do see the effects of previous write operations on the same transaction. Committing a transaction usually succeeds in the absence of <a class="reference internal" href="developer-guide.html#conflict-ranges"><em>conflicts</em></a>.</p>
<p>Applications must provide error handling and an appropriate retry loop around the application code for a transaction. See the documentation for <a class="reference internal" href="#c.fdb_transaction_on_error" title="fdb_transaction_on_error"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_on_error()</span></tt></a>.</p>
<p>Transactions group operations into a unit with the properties of <em>atomicity</em>, <em>isolation</em>, and <em>durability</em>. Transactions also provide the ability to maintain an application&#8217;s invariants or integrity constraints, supporting the property of <em>consistency</em>. Together these properties are known as <a class="reference internal" href="developer-guide.html#acid"><em>ACID</em></a>.</p>
<p>Transactions are also causally consistent: once a transaction has been successfully committed, all subsequently created transactions will see the modifications made by it.</p>
<dl class="type">
<dt id="c.FDBTransaction">
<tt class="descname">FDBTransaction</tt><a class="headerlink" href="#c.FDBTransaction" title="Permalink to this definition">∞</a></dt>
<dd><p>An opaque type that represents a transaction in the FoundationDB C API.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_transaction_destroy">
void <tt class="descname">fdb_transaction_destroy</tt><big>(</big><a class="reference internal" href="#c.FDBTransaction" title="FDBTransaction">FDBTransaction</a>*<em>&nbsp;transaction</em><big>)</big><a class="headerlink" href="#c.fdb_transaction_destroy" title="Permalink to this definition">∞</a></dt>
<dd><p>Destroys an <a class="reference internal" href="#c.FDBTransaction" title="FDBTransaction"><tt class="xref c c-type docutils literal"><span class="pre">FDBTransaction</span></tt></a> object. It must be called exactly once for each successful call to <a class="reference internal" href="#c.fdb_database_create_transaction" title="fdb_database_create_transaction"><tt class="xref c c-func docutils literal"><span class="pre">fdb_database_create_transaction()</span></tt></a>. Destroying a transaction which has not had <a class="reference internal" href="#c.fdb_transaction_commit" title="fdb_transaction_commit"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_commit()</span></tt></a> called implicitly &#8220;rolls back&#8221; the transaction (sets and clears do not take effect on the database).</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_transaction_set_option">
<a class="reference internal" href="#c.fdb_error_t" title="fdb_error_t">fdb_error_t</a> <tt class="descname">fdb_transaction_set_option</tt><big>(</big><a class="reference internal" href="#c.FDBTransaction" title="FDBTransaction">FDBTransaction</a>*<em>&nbsp;transaction</em>, <a class="reference internal" href="#c.FDBTransactionOption" title="FDBTransactionOption">FDBTransactionOption</a><em>&nbsp;option</em>, uint8_t const*<em>&nbsp;value</em>, int<em>&nbsp;value_length</em><big>)</big><a class="headerlink" href="#c.fdb_transaction_set_option" title="Permalink to this definition">∞</a></dt>
<dd><p>Called to set an option on an <a class="reference internal" href="#c.FDBTransaction" title="FDBTransaction"><tt class="xref c c-type docutils literal"><span class="pre">FDBTransaction</span></tt></a>. If the given option is documented as taking a parameter, you must also pass a pointer to the parameter value and the parameter value&#8217;s length. If the option is documented as taking an <tt class="docutils literal"><span class="pre">Int</span></tt> parameter, <tt class="docutils literal"><span class="pre">value</span></tt> must point to a signed 64-bit integer (little-endian), and <tt class="docutils literal"><span class="pre">value_length</span></tt> must be 8. This memory only needs to be valid until <a class="reference internal" href="#c.fdb_transaction_set_option" title="fdb_transaction_set_option"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_set_option()</span></tt></a> returns.</p>
</dd></dl>

<dl class="type">
<dt id="c.FDBTransactionOption">
<tt class="descname">FDBTransactionOption</tt><a class="headerlink" href="#c.FDBTransactionOption" title="Permalink to this definition">∞</a></dt>
<dd><p>Please see <tt class="docutils literal"><span class="pre">fdb_c_options.g.h</span></tt> for a definition of this type, along with documentation of its allowed values.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_transaction_set_read_version">
void <tt class="descname">fdb_transaction_set_read_version</tt><big>(</big><a class="reference internal" href="#c.FDBTransaction" title="FDBTransaction">FDBTransaction</a>*<em>&nbsp;transaction</em>, int64_t<em>&nbsp;version</em><big>)</big><a class="headerlink" href="#c.fdb_transaction_set_read_version" title="Permalink to this definition">∞</a></dt>
<dd><p>Sets the snapshot read version used by a transaction. This is not needed in simple cases. If the given version is too old, subsequent reads will fail with error_code_past_version; if it is too new, subsequent reads may be delayed indefinitely and/or fail with error_code_future_version. If any of <tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_get_*()</span></tt> have been called on this transaction already, the result is undefined.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_transaction_get_read_version">
<a class="reference internal" href="#c.FDBFuture" title="FDBFuture">FDBFuture</a>* <tt class="descname">fdb_transaction_get_read_version</tt><big>(</big><a class="reference internal" href="#c.FDBTransaction" title="FDBTransaction">FDBTransaction</a>*<em>&nbsp;transaction</em><big>)</big><a class="headerlink" href="#c.fdb_transaction_get_read_version" title="Permalink to this definition">∞</a></dt>
<dd><p>Returns an <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> which will be set to the transaction snapshot read version. You must first wait for the <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> to be ready, check for errors, call <a class="reference internal" href="#c.fdb_future_get_version" title="fdb_future_get_version"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_get_version()</span></tt></a> to extract the version into an int64_t that you provide, and then destroy the <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> with <a class="reference internal" href="#c.fdb_future_destroy" title="fdb_future_destroy"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_destroy()</span></tt></a>.</p>
<p>The transaction obtains a snapshot read version automatically at the time of the first call to <tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_get_*()</span></tt> (including this one) and (unless causal consistency has been deliberately compromised by transaction options) is guaranteed to represent all transactions which were reported committed before that call.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_transaction_get">
<a class="reference internal" href="#c.FDBFuture" title="FDBFuture">FDBFuture</a>* <tt class="descname">fdb_transaction_get</tt><big>(</big><a class="reference internal" href="#c.FDBTransaction" title="FDBTransaction">FDBTransaction</a>*<em>&nbsp;transaction</em>, uint8_t const*<em>&nbsp;key_name</em>, int<em>&nbsp;key_name_length</em>, <a class="reference internal" href="#c.fdb_bool_t" title="fdb_bool_t">fdb_bool_t</a><em>&nbsp;snapshot</em><big>)</big><a class="headerlink" href="#c.fdb_transaction_get" title="Permalink to this definition">∞</a></dt>
<dd><p>Reads a value from the database snapshot represented by <tt class="xref c c-data docutils literal"><span class="pre">transaction</span></tt>.</p>
<p>Returns an <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> which will be set to the value of <tt class="xref c c-data docutils literal"><span class="pre">key_name</span></tt> in the database. You must first wait for the <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> to be ready, check for errors, call <a class="reference internal" href="#c.fdb_future_get_value" title="fdb_future_get_value"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_get_value()</span></tt></a> to extract the value, and then destroy the <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> with <a class="reference internal" href="#c.fdb_future_destroy" title="fdb_future_destroy"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_destroy()</span></tt></a>.</p>
<p>See <a class="reference internal" href="#c.fdb_future_get_value" title="fdb_future_get_value"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_get_value()</span></tt></a> to see exactly how results are unpacked. If <tt class="xref c c-data docutils literal"><span class="pre">key_name</span></tt> is not present in the database, the result is not an error, but a zero for <tt class="xref c c-data docutils literal"><span class="pre">*out_present</span></tt> returned from that function.</p>
<dl class="docutils">
<dt><tt class="xref c c-data docutils literal"><span class="pre">key_name</span></tt></dt>
<dd>A pointer to the name of the key to be looked up in the database. The value does not need to be NULL-terminated.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">key_name_length</span></tt></dt>
<dd>The length of the parameter specified by <tt class="xref c c-data docutils literal"><span class="pre">key_name</span></tt>.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">snapshot</span></tt></dt>
<dd>Non-zero if this is a <a class="reference internal" href="#snapshots"><em>snapshot read</em></a>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.fdb_transaction_get_key">
<a class="reference internal" href="#c.FDBFuture" title="FDBFuture">FDBFuture</a>* <tt class="descname">fdb_transaction_get_key</tt><big>(</big><a class="reference internal" href="#c.FDBTransaction" title="FDBTransaction">FDBTransaction</a>*<em>&nbsp;transaction</em>, uint8_t const*<em>&nbsp;key_name</em>, int<em>&nbsp;key_name_length</em>, <a class="reference internal" href="#c.fdb_bool_t" title="fdb_bool_t">fdb_bool_t</a><em>&nbsp;or_equal</em>, int<em>&nbsp;offset</em>, <a class="reference internal" href="#c.fdb_bool_t" title="fdb_bool_t">fdb_bool_t</a><em>&nbsp;snapshot</em><big>)</big><a class="headerlink" href="#c.fdb_transaction_get_key" title="Permalink to this definition">∞</a></dt>
<dd><p>Resolves a <a class="reference internal" href="#key-selectors"><em>key selector</em></a> against the keys in the database snapshot represented by <tt class="xref c c-data docutils literal"><span class="pre">transaction</span></tt>.</p>
<p>Returns an <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> which will be set to the key in the database matching the <a class="reference internal" href="#key-selectors"><em>key selector</em></a>. You must first wait for the <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> to be ready, check for errors, call <a class="reference internal" href="#c.fdb_future_get_key" title="fdb_future_get_key"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_get_key()</span></tt></a> to extract the key, and then destroy the <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> with <a class="reference internal" href="#c.fdb_future_destroy" title="fdb_future_destroy"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_destroy()</span></tt></a>.</p>
<dl class="docutils">
<dt><tt class="xref c c-data docutils literal"><span class="pre">key_name</span></tt>, <tt class="xref c c-data docutils literal"><span class="pre">key_name_length</span></tt>, <tt class="xref c c-data docutils literal"><span class="pre">or_equal</span></tt>, <tt class="xref c c-data docutils literal"><span class="pre">offset</span></tt></dt>
<dd>The four components of a <a class="reference internal" href="#key-selectors"><em>key selector</em></a>.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">snapshot</span></tt></dt>
<dd>Non-zero if this is a <a class="reference internal" href="#snapshots"><em>snapshot read</em></a>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.fdb_transaction_get_addresses_for_key">
<a class="reference internal" href="#c.FDBFuture" title="FDBFuture">FDBFuture</a>* <tt class="descname">fdb_transaction_get_addresses_for_key</tt><big>(</big><a class="reference internal" href="#c.FDBTransaction" title="FDBTransaction">FDBTransaction</a>*<em>&nbsp;transaction</em>, uint8_t const*<em>&nbsp;key_name</em>, int<em>&nbsp;key_name_length</em><big>)</big><a class="headerlink" href="#c.fdb_transaction_get_addresses_for_key" title="Permalink to this definition">∞</a></dt>
<dd><p>Returns a list of public network addresses as strings, one for each of the storage servers responsible for storing <tt class="xref c c-data docutils literal"><span class="pre">key_name</span></tt> and its associated value.</p>
<p>Returns an <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> which will be set to an array of strings. You must first wait for the <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> to be ready, check for errors, call <a class="reference internal" href="#c.fdb_future_get_string_array" title="fdb_future_get_string_array"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_get_string_array()</span></tt></a> to extract the string array, and then destroy the <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> with <a class="reference internal" href="#c.fdb_future_destroy" title="fdb_future_destroy"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_destroy()</span></tt></a>.</p>
<dl class="docutils">
<dt><tt class="xref c c-data docutils literal"><span class="pre">key_name</span></tt></dt>
<dd>A pointer to the name of the key whose location is to be queried.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">key_name_length</span></tt></dt>
<dd>The length of the parameter specified by <tt class="xref c c-data docutils literal"><span class="pre">key_name</span></tt>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.fdb_transaction_get_range">
<a class="reference internal" href="#c.FDBFuture" title="FDBFuture">FDBFuture</a>* <tt class="descname">fdb_transaction_get_range</tt><big>(</big><a class="reference internal" href="#c.FDBTransaction" title="FDBTransaction">FDBTransaction</a>*<em>&nbsp;transaction</em>, uint8_t const*<em>&nbsp;begin_key_name</em>, int<em>&nbsp;begin_key_name_length</em>, <a class="reference internal" href="#c.fdb_bool_t" title="fdb_bool_t">fdb_bool_t</a><em>&nbsp;begin_or_equal</em>, int<em>&nbsp;begin_offset</em>, uint8_t const*<em>&nbsp;end_key_name</em>, int<em>&nbsp;end_key_name_length</em>, <a class="reference internal" href="#c.fdb_bool_t" title="fdb_bool_t">fdb_bool_t</a><em>&nbsp;end_or_equal</em>, int<em>&nbsp;end_offset</em>, int<em>&nbsp;limit</em>, int<em>&nbsp;target_bytes</em>, <a class="reference internal" href="#c.FDBStreamingMode" title="FDBStreamingMode">FDBStreamingMode</a><em>&nbsp;mode</em>, int<em>&nbsp;iteration</em>, <a class="reference internal" href="#c.fdb_bool_t" title="fdb_bool_t">fdb_bool_t</a><em>&nbsp;snapshot</em>, <a class="reference internal" href="#c.fdb_bool_t" title="fdb_bool_t">fdb_bool_t</a><em>&nbsp;reverse</em><big>)</big><a class="headerlink" href="#c.fdb_transaction_get_range" title="Permalink to this definition">∞</a></dt>
<dd><p>Reads all key-value pairs in the database snapshot represented by <tt class="xref c c-data docutils literal"><span class="pre">transaction</span></tt> (potentially limited by <tt class="xref c c-data docutils literal"><span class="pre">limit</span></tt>, <tt class="xref c c-data docutils literal"><span class="pre">target_bytes</span></tt>, or <tt class="xref c c-data docutils literal"><span class="pre">mode</span></tt>) which have a key lexicographically greater than or equal to the key resolved by the begin <a class="reference internal" href="#key-selectors"><em>key selector</em></a> and lexicographically less than the key resolved by the end <a class="reference internal" href="#key-selectors"><em>key selector</em></a>.</p>
<p>Returns an <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> which will be set to an <a class="reference internal" href="#c.FDBKeyValue" title="FDBKeyValue"><tt class="xref c c-type docutils literal"><span class="pre">FDBKeyValue</span></tt></a> array. You must first wait for the <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> to be ready, check for errors, call <a class="reference internal" href="#c.fdb_future_get_keyvalue_array" title="fdb_future_get_keyvalue_array"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_get_keyvalue_array()</span></tt></a> to extract the key-value array, and then destroy the <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> with <a class="reference internal" href="#c.fdb_future_destroy" title="fdb_future_destroy"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_destroy()</span></tt></a>.</p>
<dl class="docutils">
<dt><tt class="xref c c-data docutils literal"><span class="pre">begin_key_name</span></tt>, <tt class="xref c c-data docutils literal"><span class="pre">begin_key_name_length</span></tt>, <tt class="xref c c-data docutils literal"><span class="pre">begin_or_equal</span></tt>, <tt class="xref c c-data docutils literal"><span class="pre">begin_offset</span></tt></dt>
<dd>The four components of a <a class="reference internal" href="#key-selectors"><em>key selector</em></a> describing the beginning of the range.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">end_key_name</span></tt>, <tt class="xref c c-data docutils literal"><span class="pre">end_key_name_length</span></tt>, <tt class="xref c c-data docutils literal"><span class="pre">end_or_equal</span></tt>, <tt class="xref c c-data docutils literal"><span class="pre">end_offset</span></tt></dt>
<dd>The four components of a <a class="reference internal" href="#key-selectors"><em>key selector</em></a> describing the end of the range.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">limit</span></tt></dt>
<dd>If non-zero, indicates the maximum number of key-value pairs to return. If this limit was reached before the end of the specified range, then the <tt class="xref c c-data docutils literal"><span class="pre">*more</span></tt> return of <a class="reference internal" href="#c.fdb_future_get_keyvalue_array" title="fdb_future_get_keyvalue_array"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_get_keyvalue_array()</span></tt></a> will be set to a non-zero value.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">target_bytes</span></tt></dt>
<dd>If non-zero, indicates a (soft) cap on the combined number of bytes of keys and values to return. If this limit was reached before the end of the specified range, then the <tt class="xref c c-data docutils literal"><span class="pre">*more</span></tt> return of <a class="reference internal" href="#c.fdb_future_get_keyvalue_array" title="fdb_future_get_keyvalue_array"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_get_keyvalue_array()</span></tt></a> will be set to a non-zero value.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">mode</span></tt></dt>
<dd>One of the <a class="reference internal" href="#c.FDBStreamingMode" title="FDBStreamingMode"><tt class="xref c c-type docutils literal"><span class="pre">FDBStreamingMode</span></tt></a> values indicating how the caller would like the data in the range returned.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">iteration</span></tt></dt>
<dd>If <tt class="xref c c-data docutils literal"><span class="pre">mode</span></tt> is <tt class="xref c c-data docutils literal"><span class="pre">FDB_STREAMING_MODE_ITERATOR</span></tt>, this parameter should start at 1 and be incremented by 1 for each successive call while reading this range. In all other cases it is ignored.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">snapshot</span></tt></dt>
<dd>Non-zero if this is a <a class="reference internal" href="#snapshots"><em>snapshot read</em></a>.</dd>
</dl>
<p><tt class="xref c c-data docutils literal"><span class="pre">reverse</span></tt></p>
<blockquote>
<div>If non-zero, key-value pairs will be returned in reverse lexicographical order beginning at the end of the range.</div></blockquote>
</dd></dl>

<dl class="type">
<dt id="c.FDBStreamingMode">
<tt class="descname">FDBStreamingMode</tt><a class="headerlink" href="#c.FDBStreamingMode" title="Permalink to this definition">∞</a></dt>
<dd><p>An enumeration of available streaming modes to be passed to <a class="reference internal" href="#c.fdb_transaction_get_range" title="fdb_transaction_get_range"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_get_range()</span></tt></a>.</p>
<p><tt class="xref c c-data docutils literal"><span class="pre">FDB_STREAMING_MODE_ITERATOR</span></tt></p>
<blockquote>
<div>The caller is implementing an iterator (most likely in a binding to a higher level language). The amount of data returned depends on the value of the <tt class="xref c c-data docutils literal"><span class="pre">iteration</span></tt> parameter to <a class="reference internal" href="#c.fdb_transaction_get_range" title="fdb_transaction_get_range"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_get_range()</span></tt></a>.</div></blockquote>
<p><tt class="xref c c-data docutils literal"><span class="pre">FDB_STREAMING_MODE_SMALL</span></tt></p>
<blockquote>
<div>Data is returned in small batches (not much more expensive than reading individual key-value pairs).</div></blockquote>
<p><tt class="xref c c-data docutils literal"><span class="pre">FDB_STREAMING_MODE_MEDIUM</span></tt></p>
<blockquote>
<div>Data is returned in batches between _SMALL and _LARGE.</div></blockquote>
<p><tt class="xref c c-data docutils literal"><span class="pre">FDB_STREAMING_MODE_LARGE</span></tt></p>
<blockquote>
<div>Data is returned in batches large enough to be, in a high-concurrency environment, nearly as efficient as possible. If the caller does not need the entire range, some disk and network bandwidth may be wasted. The batch size may be still be too small to allow a single client to get high throughput from the database.</div></blockquote>
<p><tt class="xref c c-data docutils literal"><span class="pre">FDB_STREAMING_MODE_SERIAL</span></tt></p>
<blockquote>
<div>Data is returned in batches large enough that an individual client can get reasonable read bandwidth from the database. If the caller does not need the entire range, considerable disk and network bandwidth may be wasted.</div></blockquote>
<p><tt class="xref c c-data docutils literal"><span class="pre">FDB_STREAMING_MODE_WANT_ALL</span></tt></p>
<blockquote>
<div>The caller intends to consume the entire range and would like it all transferred as early as possible.</div></blockquote>
<p><tt class="xref c c-data docutils literal"><span class="pre">FDB_STREAMING_MODE_EXACT</span></tt></p>
<blockquote>
<div>The caller has passed a specific row limit and wants that many rows delivered in a single batch.</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="c.fdb_transaction_set">
void <tt class="descname">fdb_transaction_set</tt><big>(</big><a class="reference internal" href="#c.FDBTransaction" title="FDBTransaction">FDBTransaction</a>*<em>&nbsp;transaction</em>, uint8_t const*<em>&nbsp;key_name</em>, int<em>&nbsp;key_name_length</em>, uint8_t const*<em>&nbsp;value</em>, int<em>&nbsp;value_length</em><big>)</big><a class="headerlink" href="#c.fdb_transaction_set" title="Permalink to this definition">∞</a></dt>
<dd><p>Modify the database snapshot represented by <tt class="xref c c-data docutils literal"><span class="pre">transaction</span></tt> to change the given key to have the given value. If the given key was not previously present in the database it is inserted.</p>
<p>The modification affects the actual database only if <tt class="xref c c-data docutils literal"><span class="pre">transaction</span></tt> is later committed with <a class="reference internal" href="#c.fdb_transaction_commit" title="fdb_transaction_commit"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_commit()</span></tt></a>.</p>
<dl class="docutils">
<dt><tt class="xref c c-data docutils literal"><span class="pre">key_name</span></tt></dt>
<dd>A pointer to the name of the key to be inserted into the database. The value does not need to be NULL-terminated.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">key_name_length</span></tt></dt>
<dd>The length of the parameter specified by <tt class="xref c c-data docutils literal"><span class="pre">key_name</span></tt>.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">value</span></tt></dt>
<dd>A pointer to the value to be inserted into the database. The value does not need to be NULL-terminated.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">value_length</span></tt></dt>
<dd>The length of the parameter specified by <tt class="xref c c-data docutils literal"><span class="pre">value</span></tt>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.fdb_transaction_clear">
void <tt class="descname">fdb_transaction_clear</tt><big>(</big><a class="reference internal" href="#c.FDBTransaction" title="FDBTransaction">FDBTransaction</a>*<em>&nbsp;transaction</em>, uint8_t const*<em>&nbsp;key_name</em>, int<em>&nbsp;key_name_length</em><big>)</big><a class="headerlink" href="#c.fdb_transaction_clear" title="Permalink to this definition">∞</a></dt>
<dd><p>Modify the database snapshot represented by <tt class="xref c c-data docutils literal"><span class="pre">transaction</span></tt> to remove the given key from the database. If the key was not previously present in the database, there is no effect.</p>
<p>The modification affects the actual database only if <tt class="xref c c-data docutils literal"><span class="pre">transaction</span></tt> is later committed with <a class="reference internal" href="#c.fdb_transaction_commit" title="fdb_transaction_commit"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_commit()</span></tt></a>.</p>
<dl class="docutils">
<dt><tt class="xref c c-data docutils literal"><span class="pre">key_name</span></tt></dt>
<dd>A pointer to the name of the key to be removed from the database. The value does not need to be NULL-terminated.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">key_name_length</span></tt></dt>
<dd>The length of the parameter specified by <tt class="xref c c-data docutils literal"><span class="pre">key_name</span></tt>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.fdb_transaction_clear_range">
void <tt class="descname">fdb_transaction_clear_range</tt><big>(</big><a class="reference internal" href="#c.FDBTransaction" title="FDBTransaction">FDBTransaction</a>*<em>&nbsp;transaction</em>, uint8_t const*<em>&nbsp;begin_key_name</em>, int<em>&nbsp;begin_key_name_length</em>, uint8_t const*<em>&nbsp;end_key_name</em>, int<em>&nbsp;end_key_name_length</em><big>)</big><a class="headerlink" href="#c.fdb_transaction_clear_range" title="Permalink to this definition">∞</a></dt>
<dd><p>Modify the database snapshot represented by <tt class="xref c c-data docutils literal"><span class="pre">transaction</span></tt> to remove all keys (if any) which are lexicographically greater than or equal to the given begin key and lexicographically less than the given end_key.</p>
<p>The modification affects the actual database only if <tt class="xref c c-data docutils literal"><span class="pre">transaction</span></tt> is later committed with <a class="reference internal" href="#c.fdb_transaction_commit" title="fdb_transaction_commit"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_commit()</span></tt></a>.</p>
<dl class="docutils">
<dt><tt class="xref c c-data docutils literal"><span class="pre">begin_key_name</span></tt></dt>
<dd>A pointer to the name of the key specifying the beginning of the range to clear. The value does not need to be NULL-terminated.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">begin_key_name_length</span></tt></dt>
<dd>The length of the parameter specified by <tt class="xref c c-data docutils literal"><span class="pre">begin_key_name</span></tt>.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">end_key_name</span></tt></dt>
<dd>A pointer to the name of the key specifying the end of the range to clear. The value does not need to be NULL-terminated.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">end_key_name_length</span></tt></dt>
<dd>The length of the parameter specified by <tt class="xref c c-data docutils literal"><span class="pre">end_key_name_length</span></tt>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.fdb_transaction_atomic_op">
void <tt class="descname">fdb_transaction_atomic_op</tt><big>(</big><a class="reference internal" href="#c.FDBTransaction" title="FDBTransaction">FDBTransaction</a>*<em>&nbsp;transaction</em>, uint8_t const*<em>&nbsp;key_name</em>, int<em>&nbsp;key_name_length</em>, uint8_t const*<em>&nbsp;param</em>, int<em>&nbsp;param_length</em>, <a class="reference internal" href="#c.FDBMutationType" title="FDBMutationType">FDBMutationType</a><em>&nbsp;operationType</em><big>)</big><a class="headerlink" href="#c.fdb_transaction_atomic_op" title="Permalink to this definition">∞</a></dt>
<dd><p>Modify the database snapshot represented by <tt class="xref c c-data docutils literal"><span class="pre">transaction</span></tt> to perform the operation indicated by <tt class="docutils literal"><span class="pre">operationType</span></tt> with operand <tt class="docutils literal"><span class="pre">param</span></tt> to the value stored by the given key.</p>
<p>An atomic operation is a single database command that carries out several logical steps: reading the value of a key, performing a transformation on that value, and writing the result. Different atomic operations perform different transformations. Like other database operations, an atomic operation is used within a transaction; however, its use within a transaction will not cause the transaction to conflict.</p>
<p>Atomic operations do not expose the current value of the key to the client but simply send the database the transformation to apply. In regard to conflict checking, an atomic operation is equivalent to a write without a read. It can only cause <em>other</em> transactions performing reads of the key to conflict.</p>
<p>By combining these logical steps into a single, read-free operation, FoundationDB can guarantee that the transaction will not conflict due to the operation. This makes atomic operations ideal for operating on keys that are frequently modified. A common example is the use of a key-value pair as a counter.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If a transaction uses both an atomic operation and a serializable read on the same key, the benefits of using the atomic operation (for both conflict checking and performance) are lost.</p>
</div>
<p>The modification affects the actual database only if <tt class="xref c c-data docutils literal"><span class="pre">transaction</span></tt> is later committed with <a class="reference internal" href="#c.fdb_transaction_commit" title="fdb_transaction_commit"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_commit()</span></tt></a>.</p>
<dl class="docutils">
<dt><tt class="xref c c-data docutils literal"><span class="pre">key_name</span></tt></dt>
<dd>A pointer to the name of the key whose value is to be mutated.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">key_name_length</span></tt></dt>
<dd>The length of the parameter specified by <tt class="xref c c-data docutils literal"><span class="pre">key_name</span></tt>.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">param</span></tt></dt>
<dd>A pointer to the parameter with which the atomic operation will mutate the value associated with <tt class="xref c c-data docutils literal"><span class="pre">key_name</span></tt>.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">param_length</span></tt></dt>
<dd>The length of the parameter specified by <tt class="xref c c-data docutils literal"><span class="pre">param</span></tt>.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">operation_type</span></tt></dt>
<dd>One of the <a class="reference internal" href="#c.FDBMutationType" title="FDBMutationType"><tt class="xref c c-type docutils literal"><span class="pre">FDBMutationType</span></tt></a> values indicating which operation should be performed.</dd>
</dl>
</dd></dl>

<dl class="type">
<dt id="c.FDBMutationType">
<tt class="descname">FDBMutationType</tt><a class="headerlink" href="#c.FDBMutationType" title="Permalink to this definition">∞</a></dt>
<dd><p>An enumeration of available opcodes to be passed to <a class="reference internal" href="#c.fdb_transaction_atomic_op" title="fdb_transaction_atomic_op"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_atomic_op()</span></tt></a></p>
<p><tt class="xref c c-data docutils literal"><span class="pre">FDB_MUTATION_TYPE_ADD</span></tt></p>
<p>Performs an addition of little-endian integers. If the existing value in the database is not present or shorter than <tt class="docutils literal"><span class="pre">param</span></tt>, it is first extended to the length of <tt class="docutils literal"><span class="pre">param</span></tt> with zero bytes.  If <tt class="docutils literal"><span class="pre">param</span></tt> is shorter than the existing value in the database, the existing value is truncated to match the length of <tt class="docutils literal"><span class="pre">param</span></tt>.</p>
<p>The integers to be added must be stored in a little-endian representation.  They can be signed in two&#8217;s complement representation or unsigned. You can add to an integer at a known offset in the value by prepending the appropriate number of zero bytes to <tt class="docutils literal"><span class="pre">param</span></tt> and padding with zero bytes to match the length of the value. However, this offset technique requires that you know the addition will not cause the integer field within the value to overflow.</p>
<p><tt class="xref c c-data docutils literal"><span class="pre">FDB_MUTATION_TYPE_AND</span></tt></p>
<p>Performs a bitwise &#8220;and&#8221; operation.  If the existing value in the database is not present or shorter than <tt class="docutils literal"><span class="pre">param</span></tt>, it is first extended to the length of <tt class="docutils literal"><span class="pre">param</span></tt> with zero bytes.  If <tt class="docutils literal"><span class="pre">param</span></tt> is shorter than the existing value in the database, the existing value is truncated to match the length of <tt class="docutils literal"><span class="pre">param</span></tt>.</p>
<p><tt class="xref c c-data docutils literal"><span class="pre">FDB_MUTATION_TYPE_OR</span></tt></p>
<p>Performs a bitwise &#8220;or&#8221; operation.  If the existing value in the database is not present or shorter than <tt class="docutils literal"><span class="pre">param</span></tt>, it is first extended to the length of <tt class="docutils literal"><span class="pre">param</span></tt> with zero bytes.  If <tt class="docutils literal"><span class="pre">param</span></tt> is shorter than the existing value in the database, the existing value is truncated to match the length of <tt class="docutils literal"><span class="pre">param</span></tt>.</p>
<p><tt class="xref c c-data docutils literal"><span class="pre">FDB_MUTATION_TYPE_XOR</span></tt></p>
<p>Performs a bitwise &#8220;xor&#8221; operation.  If the existing value in the database is not present or shorter than <tt class="docutils literal"><span class="pre">param</span></tt>, it is first extended to the length of <tt class="docutils literal"><span class="pre">param</span></tt> with zero bytes.  If <tt class="docutils literal"><span class="pre">param</span></tt> is shorter than the existing value in the database, the existing value is truncated to match the length of <tt class="docutils literal"><span class="pre">param</span></tt>.</p>
<p><tt class="xref c c-data docutils literal"><span class="pre">FDB_MUTATION_TYPE_MAX</span></tt></p>
<p>Sets the value in the database to the larger of the existing value and <tt class="docutils literal"><span class="pre">param</span></tt>. If the existing value in the database is not present or shorter than <tt class="docutils literal"><span class="pre">param</span></tt>, it is first extended to the length of <tt class="docutils literal"><span class="pre">param</span></tt> with zero bytes. If <tt class="docutils literal"><span class="pre">param</span></tt> is shorter than the existing value in the database, the existing value is truncated to match the length of <tt class="docutils literal"><span class="pre">param</span></tt>.</p>
<p>Both the existing value and <tt class="docutils literal"><span class="pre">param</span></tt> are treated as unsigned integers. (This differs from the behavior of atomic addition.)</p>
<p><tt class="xref c c-data docutils literal"><span class="pre">FDB_MUTATION_TYPE_MIN</span></tt></p>
<p>Sets the value in the database to the smaller of the existing value and <tt class="docutils literal"><span class="pre">param</span></tt>. If the existing value in the database is not present or shorter than <tt class="docutils literal"><span class="pre">param</span></tt>, it is first extended to the length of <tt class="docutils literal"><span class="pre">param</span></tt> with zero bytes. If <tt class="docutils literal"><span class="pre">param</span></tt> is shorter than the existing value in the database, the existing value is truncated to match the length of <tt class="docutils literal"><span class="pre">param</span></tt>.</p>
<p>Both the existing value and <tt class="docutils literal"><span class="pre">param</span></tt> are treated as unsigned integers. (This differs from the behavior of atomic addition.)</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_transaction_commit">
<a class="reference internal" href="#c.FDBFuture" title="FDBFuture">FDBFuture</a>* <tt class="descname">fdb_transaction_commit</tt><big>(</big><a class="reference internal" href="#c.FDBTransaction" title="FDBTransaction">FDBTransaction</a>*<em>&nbsp;transaction</em><big>)</big><a class="headerlink" href="#c.fdb_transaction_commit" title="Permalink to this definition">∞</a></dt>
<dd><p>Attempts to commit the sets and clears previously applied to the database snapshot represented by <tt class="xref c c-data docutils literal"><span class="pre">transaction</span></tt> to the actual database. The commit may or may not succeed &#8211; in particular, if a conflicting transaction previously committed, then the commit must fail in order to preserve transactional isolation. If the commit does succeed, the transaction is durably committed to the database and all subsequently started transactions will observe its effects.</p>
<p>It is not necessary to commit a read-only transaction &#8211; you can simply call <a class="reference internal" href="#c.fdb_transaction_destroy" title="fdb_transaction_destroy"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_destroy()</span></tt></a>.</p>
<p>Returns an <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> representing an empty value. You must first wait for the <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> to be ready, check for errors, and then destroy the <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> with <a class="reference internal" href="#c.fdb_future_destroy" title="fdb_future_destroy"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_destroy()</span></tt></a>.</p>
<p>Callers will usually want to retry a transaction if the commit or a prior <tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_get_*()</span></tt> returns a retryable error (see <a class="reference internal" href="#c.fdb_transaction_on_error" title="fdb_transaction_on_error"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_on_error()</span></tt></a>).</p>
<p>As with other client/server databases, in some failure scenarios a client may be unable to determine whether a transaction succeeded. In these cases, <a class="reference internal" href="#c.fdb_transaction_commit" title="fdb_transaction_commit"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_commit()</span></tt></a> will return a <a class="reference internal" href="api-error-codes.html#developer-guide-error-codes"><em>commit_unknown_result</em></a> error. The <a class="reference internal" href="#c.fdb_transaction_on_error" title="fdb_transaction_on_error"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_on_error()</span></tt></a> function treats this error as retryable, so retry loops that don&#8217;t check for <a class="reference internal" href="api-error-codes.html#developer-guide-error-codes"><em>commit_unknown_result</em></a> could execute the transaction twice. In these cases, you must consider the idempotence of the transaction. For more information, see <a class="reference internal" href="developer-guide.html#developer-guide-unknown-results"><em>Transactions with unknown results</em></a>.</p>
<p>Normally, commit will wait for outstanding reads to return. However, if those reads were snapshot reads or the transaction option for disabling &#8220;read-your-writes&#8221; has been invoked, any outstanding reads will immediately return errors.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_transaction_get_committed_version">
<a class="reference internal" href="#c.fdb_error_t" title="fdb_error_t">fdb_error_t</a> <tt class="descname">fdb_transaction_get_committed_version</tt><big>(</big><a class="reference internal" href="#c.FDBTransaction" title="FDBTransaction">FDBTransaction</a>*<em>&nbsp;transaction</em>, int64_t*<em>&nbsp;out_version</em><big>)</big><a class="headerlink" href="#c.fdb_transaction_get_committed_version" title="Permalink to this definition">∞</a></dt>
<dd><p>Retrieves the database version number at which a given transaction was committed. <a class="reference internal" href="#c.fdb_transaction_commit" title="fdb_transaction_commit"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_commit()</span></tt></a> must have been called on <tt class="xref c c-data docutils literal"><span class="pre">transaction</span></tt> and the resulting future must be ready and not an error before this function is called, or the behavior is undefined. Read-only transactions do not modify the database when committed and will have a committed version of -1. Keep in mind that a transaction which reads keys and then sets them to their current values may be optimized to a read-only transaction.</p>
<p>Note that database versions are not necessarily unique to a given transaction and so cannot be used to determine in what order two transactions completed. The only use for this function is to manually enforce causal consistency when calling <a class="reference internal" href="#c.fdb_transaction_set_read_version" title="fdb_transaction_set_read_version"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_set_read_version()</span></tt></a> on another subsequent transaction.</p>
<p>Most applications will not call this function.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_transaction_watch">
<a class="reference internal" href="#c.FDBFuture" title="FDBFuture">FDBFuture</a>* <tt class="descname">fdb_transaction_watch</tt><big>(</big><a class="reference internal" href="#c.FDBTransaction" title="FDBTransaction">FDBTransaction</a>*<em>&nbsp;transaction</em>, uint8_t const*<em>&nbsp;key_name</em>, int<em>&nbsp;key_name_length</em><big>)</big><a class="headerlink" href="#c.fdb_transaction_watch" title="Permalink to this definition">∞</a></dt>
<dd><p>A watch&#8217;s behavior is relative to the transaction that created it. A watch will report a change in relation to the key&#8217;s value as readable by that transaction. The initial value used for comparison is either that of the transaction&#8217;s read version or the value as modified by the transaction itself prior to the creation of the watch. If the value changes and then changes back to its initial value, the watch might not report the change.</p>
<p>Until the transaction that created it has been committed, a watch will not report changes made by <em>other</em> transactions. In contrast, a watch will immediately report changes made by the transaction itself. Watches cannot be created if the transaction has set the READ_YOU_WRITES_DISABLE <a class="reference internal" href="#c.fdb_transaction_set_option" title="fdb_transaction_set_option"><tt class="xref c c-func docutils literal"><span class="pre">transaction</span> <span class="pre">option</span></tt></a>, and an attempt to do so will return an <a class="reference internal" href="api-error-codes.html#developer-guide-error-codes"><em>watches_disabled</em></a> error.</p>
<p>If the transaction used to create a watch encounters an error during commit, then the watch will be set with that error. A transaction whose <a class="reference internal" href="developer-guide.html#developer-guide-unknown-results"><em>commit result is unknown</em></a> will set all of its watches with the <a class="reference internal" href="api-error-codes.html#developer-guide-error-codes"><em>commit_unknown_result</em></a> error. If an uncommitted transaction is reset or destroyed, then any watches it created will be set with the <a class="reference internal" href="api-error-codes.html#developer-guide-error-codes"><em>transaction_cancelled</em></a> error.</p>
<p>Returns an <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> representing an empty value that will be set once the watch has detected a change to the value at the specified key. You must first wait for the <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> to be ready, check for errors, and then destroy the <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> with <a class="reference internal" href="#c.fdb_future_destroy" title="fdb_future_destroy"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_destroy()</span></tt></a>.</p>
<p>By default, each database connection can have no more than 10,000 watches that have not yet reported a change. When this number is exceeded, an attempt to create a watch will return a <a class="reference internal" href="api-error-codes.html#developer-guide-error-codes"><em>too_many_watches</em></a> error. This limit can be changed using the MAX_WATCHES <a class="reference internal" href="#c.fdb_database_set_option" title="fdb_database_set_option"><tt class="xref c c-func docutils literal"><span class="pre">database</span> <span class="pre">option</span></tt></a>. Because a watch outlives the transaction that creates it, any watch that is no longer needed should be cancelled by calling <a class="reference internal" href="#c.fdb_future_cancel" title="fdb_future_cancel"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_cancel()</span></tt></a> on its returned future.</p>
<dl class="docutils">
<dt><tt class="xref c c-data docutils literal"><span class="pre">key_name</span></tt></dt>
<dd>A pointer to the name of the key to watch. The value does not need to be NULL-terminated.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">key_name_length</span></tt></dt>
<dd>The length of the parameter specified by <tt class="xref c c-data docutils literal"><span class="pre">key_name</span></tt>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="c.fdb_transaction_on_error">
<a class="reference internal" href="#c.FDBFuture" title="FDBFuture">FDBFuture</a>* <tt class="descname">fdb_transaction_on_error</tt><big>(</big><a class="reference internal" href="#c.FDBTransaction" title="FDBTransaction">FDBTransaction</a>*<em>&nbsp;transaction</em>, <a class="reference internal" href="#c.fdb_error_t" title="fdb_error_t">fdb_error_t</a><em>&nbsp;error</em><big>)</big><a class="headerlink" href="#c.fdb_transaction_on_error" title="Permalink to this definition">∞</a></dt>
<dd><p>Implements the recommended retry and backoff behavior for a transaction. This function knows which of the error codes generated by other <tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_*()</span></tt> functions represent temporary error conditions and which represent application errors that should be handled by the application. It also implements an exponential backoff strategy to avoid swamping the database cluster with excessive retries when there is a high level of conflict between transactions.</p>
<p>On receiving any type of error from an <tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_*()</span></tt> function, the application should:</p>
<ol class="arabic simple">
<li>Call <a class="reference internal" href="#c.fdb_transaction_on_error" title="fdb_transaction_on_error"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_on_error()</span></tt></a> with the returned <a class="reference internal" href="#c.fdb_error_t" title="fdb_error_t"><tt class="xref c c-type docutils literal"><span class="pre">fdb_error_t</span></tt></a> code.</li>
<li>Wait for the resulting future to be ready.</li>
<li>If the resulting future is itself an error, destroy the future and FDBTransaction and report the error in an appropriate way.</li>
<li>If the resulting future is not an error, destroy the future and restart the application code that performs the transaction. The transaction itself will have already been reset to its initial state, but should not be destroyed and re-created because state used by <a class="reference internal" href="#c.fdb_transaction_on_error" title="fdb_transaction_on_error"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_on_error()</span></tt></a> to implement its backoff strategy and state related to timeouts and retry limits is stored there.</li>
</ol>
<p>Returns an <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> representing an empty value. You must first wait for the <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> to be ready, check for errors, and then destroy the <a class="reference internal" href="#c.FDBFuture" title="FDBFuture"><tt class="xref c c-type docutils literal"><span class="pre">FDBFuture</span></tt></a> with <a class="reference internal" href="#c.fdb_future_destroy" title="fdb_future_destroy"><tt class="xref c c-func docutils literal"><span class="pre">fdb_future_destroy()</span></tt></a>.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_transaction_reset">
void <tt class="descname">fdb_transaction_reset</tt><big>(</big><a class="reference internal" href="#c.FDBTransaction" title="FDBTransaction">FDBTransaction</a>*<em>&nbsp;transaction</em><big>)</big><a class="headerlink" href="#c.fdb_transaction_reset" title="Permalink to this definition">∞</a></dt>
<dd><p>Reset <tt class="xref c c-data docutils literal"><span class="pre">transaction</span></tt> to its initial state. This is similar to calling <a class="reference internal" href="#c.fdb_transaction_destroy" title="fdb_transaction_destroy"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_destroy()</span></tt></a> followed by <a class="reference internal" href="#c.fdb_database_create_transaction" title="fdb_database_create_transaction"><tt class="xref c c-func docutils literal"><span class="pre">fdb_database_create_transaction()</span></tt></a>. It is not necessary to call <a class="reference internal" href="#c.fdb_transaction_reset" title="fdb_transaction_reset"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_reset()</span></tt></a> when handling an error with <a class="reference internal" href="#c.fdb_transaction_on_error" title="fdb_transaction_on_error"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_on_error()</span></tt></a> since the transaction has already been reset.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_transaction_cancel">
void <tt class="descname">fdb_transaction_cancel</tt><big>(</big><a class="reference internal" href="#c.FDBTransaction" title="FDBTransaction">FDBTransaction</a>*<em>&nbsp;transaction</em><big>)</big><a class="headerlink" href="#c.fdb_transaction_cancel" title="Permalink to this definition">∞</a></dt>
<dd><p>Cancels the transaction. All pending or future uses of the transaction will return a <a class="reference internal" href="api-error-codes.html#developer-guide-error-codes"><em>transaction_cancelled</em></a> error. The transaction can be used again after it is <a class="reference internal" href="#c.fdb_transaction_reset" title="fdb_transaction_reset"><tt class="xref c c-func docutils literal"><span class="pre">reset</span></tt></a>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Be careful if you are using <a class="reference internal" href="#c.fdb_transaction_reset" title="fdb_transaction_reset"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_reset()</span></tt></a> and <a class="reference internal" href="#c.fdb_transaction_cancel" title="fdb_transaction_cancel"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_cancel()</span></tt></a> concurrently with the same transaction. Since they negate each other&#8217;s effects, a race condition between these calls will leave the transaction in an unknown state.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If your program attempts to cancel a transaction after <a class="reference internal" href="#c.fdb_transaction_commit" title="fdb_transaction_commit"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_commit()</span></tt></a> has been called but before it returns, unpredictable behavior will result. While it is guaranteed that the transaction will eventually end up in a cancelled state, the commit may or may not occur. Moreover, even if the call to <a class="reference internal" href="#c.fdb_transaction_commit" title="fdb_transaction_commit"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_commit()</span></tt></a> appears to return a <a class="reference internal" href="api-error-codes.html#developer-guide-error-codes"><em>transaction_cancelled</em></a> error,  the commit may have occurred or may occur in the future. This can make it more difficult to reason about the order in which transactions occur.</p>
</div>
</dd></dl>

<span class="target" id="conflictranges"></span><dl class="function">
<dt id="c.fdb_transaction_add_conflict_range">
<a class="reference internal" href="#c.fdb_error_t" title="fdb_error_t">fdb_error_t</a> <tt class="descname">fdb_transaction_add_conflict_range</tt><big>(</big><a class="reference internal" href="#c.FDBTransaction" title="FDBTransaction">FDBTransaction</a>*<em>&nbsp;transaction</em>, uint8_t const*<em>&nbsp;begin_key_name</em>, int<em>&nbsp;begin_key_name_length</em>, uint8_t const*<em>&nbsp;end_key_name</em>, int<em>&nbsp;end_key_name_length</em>, <a class="reference internal" href="#c.FDBConflictRangeType" title="FDBConflictRangeType">FDBConflictRangeType</a><em>&nbsp;type</em><big>)</big><a class="headerlink" href="#c.fdb_transaction_add_conflict_range" title="Permalink to this definition">∞</a></dt>
<dd><p>Adds a <a class="reference internal" href="developer-guide.html#conflict-ranges"><em>conflict range</em></a> to a transaction without performing the associated read or write.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Most applications will use the serializable isolation that transactions provide by default and will not need to manipulate conflict ranges.</p>
</div>
<dl class="docutils">
<dt><tt class="xref c c-data docutils literal"><span class="pre">begin_key_name</span></tt></dt>
<dd>A pointer to the name of the key specifying the beginning of the conflict range. The value does not need to be NULL-terminated.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">begin_key_name_length</span></tt></dt>
<dd>The length of the parameter specified by <tt class="xref c c-data docutils literal"><span class="pre">begin_key_name</span></tt>.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">end_key_name</span></tt></dt>
<dd>A pointer to the name of the key specifying the end of the conflict range. The value does not need to be NULL-terminated.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">end_key_name_length</span></tt></dt>
<dd>The length of the parameter specified by <tt class="xref c c-data docutils literal"><span class="pre">end_key_name_length</span></tt>.</dd>
<dt><tt class="xref c c-data docutils literal"><span class="pre">type</span></tt></dt>
<dd>One of the <a class="reference internal" href="#c.FDBConflictRangeType" title="FDBConflictRangeType"><tt class="xref c c-type docutils literal"><span class="pre">FDBConflictRangeType</span></tt></a> values indicating what type of conflict range is being set.</dd>
</dl>
</dd></dl>

<dl class="type">
<dt id="c.FDBConflictRangeType">
<tt class="descname">FDBConflictRangeType</tt><a class="headerlink" href="#c.FDBConflictRangeType" title="Permalink to this definition">∞</a></dt>
<dd><p>An enumeration of available conflict range types to be passed to <a class="reference internal" href="#c.fdb_transaction_add_conflict_range" title="fdb_transaction_add_conflict_range"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_add_conflict_range()</span></tt></a>.</p>
<p><tt class="xref c c-data docutils literal"><span class="pre">FDB_CONFLICT_RANGE_TYPE_READ</span></tt></p>
<p>Adds a range of keys to the transaction&#8217;s read conflict ranges as if you had read the range. As a result, other transactions that write a key in this range could cause the transaction to fail with a conflict.</p>
<p><tt class="xref c c-data docutils literal"><span class="pre">FDB_CONFLICT_RANGE_TYPE_WRITE</span></tt></p>
<p>Adds a range of keys to the transaction&#8217;s write conflict ranges as if you had cleared the range. As a result, other transactions that concurrently read a key in this range could fail with a conflict.</p>
</dd></dl>

<div class="section" id="snapshot-reads">
<span id="snapshots"></span><h3>Snapshot reads<a class="headerlink" href="#snapshot-reads" title="Permalink to this headline">∞</a></h3>
<p>Snapshot reads selectively relax FoundationDB&#8217;s isolation property, reducing <a class="reference internal" href="developer-guide.html#developer-guide-transaction-conflicts"><em>conflicts</em></a> but making it harder to reason about concurrency.</p>
<p>By default, FoundationDB transactions guarantee <a class="reference internal" href="developer-guide.html#acid"><em>serializable isolation</em></a>, resulting in a state that is <em>as if</em> transactions were executed one at a time, even if they were executed concurrently. Serializability has little performance cost when there are few <a class="reference internal" href="developer-guide.html#developer-guide-transaction-conflicts"><em>conflicts</em></a> but can be expensive when there are many. FoundationDB therefore also permits individual reads within a transaction to be done as snapshot reads.</p>
<p>Snapshot reads differ from ordinary (serializable) reads by permitting the values they read to be modified by concurrent transactions, whereas serializable reads cause conflicts in that case. Like serializable reads, snapshot reads see the effects of prior writes in the same transaction. For more information on the use of snapshot reads, see <a class="reference internal" href="developer-guide.html#snapshot-isolation"><em>Snapshot reads</em></a>.</p>
<p>In the C API, snapshot reads are performed by passing a non-zero value to the <tt class="docutils literal"><span class="pre">snapshot</span></tt> parameter of any of <tt class="docutils literal"><span class="pre">fdb_transaction_get_*</span></tt> (see for example <a class="reference internal" href="#c.fdb_transaction_get" title="fdb_transaction_get"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_get()</span></tt></a>).  Snapshot reads also interact with transaction commit a little differently than normal reads. If a snapshot read is outstanding when transaction commit is called that read will immediately return an error. (Normally, transaction commit will wait until outstanding reads return before committing.)</p>
</div>
</div>
<div class="section" id="key-selectors">
<span id="id1"></span><h2>Key selectors<a class="headerlink" href="#key-selectors" title="Permalink to this headline">∞</a></h2>
<p>FoundationDB&#8217;s lexicographically ordered data model permits finding keys based on their order (for example, finding the first key in the database greater than a given key). Key selectors represent a description of a key in the database that could be resolved to an actual key by <a class="reference internal" href="#c.fdb_transaction_get_key" title="fdb_transaction_get_key"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_get_key()</span></tt></a> or used directly as the beginning or end of a range in <a class="reference internal" href="#c.fdb_transaction_get_range" title="fdb_transaction_get_range"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_get_range()</span></tt></a>.</p>
<p>For more about how key selectors work, see <a class="reference internal" href="developer-guide.html#key-selectors"><em>Key selectors</em></a>.</p>
<p>In the FoundationDB C API, key selectors are not represented by a structure of any kind, but are instead expressed as sequential parameters to <a class="reference internal" href="#c.fdb_transaction_get_key" title="fdb_transaction_get_key"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_get_key()</span></tt></a> and <a class="reference internal" href="#c.fdb_transaction_get_range" title="fdb_transaction_get_range"><tt class="xref c c-func docutils literal"><span class="pre">fdb_transaction_get_range()</span></tt></a>. For convenience, the most common key selectors are available as C macros that expand to the appropriate parameters.</p>
<dl class="function">
<dt id="c.FDB_KEYSEL_LAST_LESS_THAN">
<tt class="descname">FDB_KEYSEL_LAST_LESS_THAN</tt><big>(</big>key_name, key_name_length<big>)</big><a class="headerlink" href="#c.FDB_KEYSEL_LAST_LESS_THAN" title="Permalink to this definition">∞</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.FDB_KEYSEL_LAST_LESS_OR_EQUAL">
<tt class="descname">FDB_KEYSEL_LAST_LESS_OR_EQUAL</tt><big>(</big>key_name, key_name_length<big>)</big><a class="headerlink" href="#c.FDB_KEYSEL_LAST_LESS_OR_EQUAL" title="Permalink to this definition">∞</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.FDB_KEYSEL_FIRST_GREATER_THAN">
<tt class="descname">FDB_KEYSEL_FIRST_GREATER_THAN</tt><big>(</big>key_name, key_name_length<big>)</big><a class="headerlink" href="#c.FDB_KEYSEL_FIRST_GREATER_THAN" title="Permalink to this definition">∞</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.FDB_KEYSEL_FIRST_GREATER_OR_EQUAL">
<tt class="descname">FDB_KEYSEL_FIRST_GREATER_OR_EQUAL</tt><big>(</big>key_name, key_name_length<big>)</big><a class="headerlink" href="#c.FDB_KEYSEL_FIRST_GREATER_OR_EQUAL" title="Permalink to this definition">∞</a></dt>
<dd></dd></dl>

<p>To use one of these macros, simply replace the four parameters in the function with one of <tt class="xref c c-func docutils literal"><span class="pre">FDB_KEYSEL_*()</span></tt>:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">future</span> <span class="o">=</span> <span class="n">fdb_transaction_get_key</span><span class="p">(</span><span class="n">transaction</span><span class="p">,</span> <span class="s">&quot;key&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
<p>could instead be written as:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">future</span> <span class="o">=</span> <span class="n">fdb_transaction_get_key</span><span class="p">(</span><span class="n">transaction</span><span class="p">,</span> <span class="n">FDB_KEYSEL_FIRST_GREATER_THAN</span><span class="p">(</span><span class="s">&quot;key&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="miscellaneous">
<h2>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline">∞</a></h2>
<dl class="type">
<dt id="c.fdb_bool_t">
<tt class="descname">fdb_bool_t</tt><a class="headerlink" href="#c.fdb_bool_t" title="Permalink to this definition">∞</a></dt>
<dd><p>An integer type representing a boolean. A value of 0 is false and non-zero is true.</p>
</dd></dl>

<dl class="type">
<dt id="c.fdb_error_t">
<tt class="descname">fdb_error_t</tt><a class="headerlink" href="#c.fdb_error_t" title="Permalink to this definition">∞</a></dt>
<dd><p>An integer type representing an error. A value of 0 is success and non-zero is an error.</p>
</dd></dl>

<dl class="function">
<dt id="c.fdb_get_error">
const char* <tt class="descname">fdb_get_error</tt><big>(</big><a class="reference internal" href="#c.fdb_error_t" title="fdb_error_t">fdb_error_t</a><em>&nbsp;code</em><big>)</big><a class="headerlink" href="#c.fdb_get_error" title="Permalink to this definition">∞</a></dt>
<dd><p>Returns a (somewhat) human-readable English message from an error code. The return value is a statically allocated null-terminated string that <em>must not</em> be freed by the caller.</p>
</dd></dl>

</div>
</div>


  </div>
  <div id="search-documentation">
    <form action="search.html" method="get">
      <input type="text" name="q" class="search-query" placeholder="Search Documentation" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <div id="docs-page-nav">
      <h3>Navigate this page</h3>
      <ul><li><a class="reference internal" href="#">C API</a><ul><li><a class="reference internal" href="#installation">Installation</a></li><li><a class="reference internal" href="#linking">Linking</a><ul><li><a class="reference internal" href="#linux">Linux</a></li><li><a class="reference internal" href="#mac-os-x">Mac OS X</a></li><li><a class="reference internal" href="#windows">Windows</a></li></ul></li><li><a class="reference internal" href="#api-versioning">API versioning</a></li><li><a class="reference internal" href="#network">Network</a></li><li><a class="reference internal" href="#future">Future</a></li><li><a class="reference internal" href="#cluster">Cluster</a></li><li><a class="reference internal" href="#database">Database</a></li><li><a class="reference internal" href="#transaction">Transaction</a><ul><li><a class="reference internal" href="#snapshot-reads">Snapshot reads</a></li></ul></li><li><a class="reference internal" href="#key-selectors">Key selectors</a></li><li><a class="reference internal" href="#miscellaneous">Miscellaneous</a></li></ul></li></ul>
    </div>
    <div id="docs-global-nav">
      <h3>Navigate All Docs</h3>
    </div>
  </div>
</div>


</div>
<footer id='footer'>
<div class='container'>
<ul>
<li>
<h3>Get Help</h3>
<ul id='get-help-list'>
<li><a href=../../contact/index.html>Contact Us</a></li>
</ul>
</li>
<li>
<h3>Social</h3>
<ul>
<li><a href=../../https:/web.archive.org/web/20150325003218/https:/twitter.com/foundationdb>Twitter</a></li>
</ul>
</li>
<li>
<h3>Legal</h3>
<ul>
<li><a href=../../legal/privacy/index.html>Privacy Policy</a></li>
<li><a href=../../files/TermsOfService.pdf>Terms of Service</a></li>
<li><a href=../../legal/trademark/index.html>Trademark Disclaimer</a></li>
</ul>
</li>
</ul>
</div>
<div id='copyright'>&copy; 2015 FoundationDB</div>
</footer>
<div class='modal' id='login-modal'>
<div class='cover'></div>
<div class='inner'>
<h2>FoundationDB Log In</h2>
<div class='content'>
<div id='explanation'></div>
<form>
<fieldset>
<div class='errors'></div>
<ul>
<li>
<label for="email">Email Address</label>
<input id='email' type='email' value=''>
</li>
<li>
<label for="password">Password</label>
<input id='password' type='password'>
</li>
<li class='actions'>
<button>
Log In
<span class='spinner'></span>
</button>
<a href="#signup">Need an account?</a>
<a href="#reset-password" id="login-reset-link">Need to reset your password?</a>
</li>
</ul>
</fieldset>
</form>
</div>
<a class='close' href='#close'>
<i class='icon-cancel'></i>
</a>
</div>
</div>
<div class='modal' id='reset-password-modal'>
<div class='cover'></div>
<div class='inner'>
<h2>Reset Your Password</h2>
<div class='content'>
<form>
<p class='note'>Enter your email address below and we'll send you password reset instructions.</p>
<fieldset>
<div class='errors'></div>
<ul>
<li>
<label for="email">Email Address</label>
<input autocapitalize="false" id="email" name="email" type="email" value="" />
</li>
<li class='actions'>
<button>
Send Instructions
<span class='spinner'></span>
</button>
<a href="#cancel">Cancel</a>
</li>
</ul>
</fieldset>
</form>
<div id='done'>
<p>Please check your email. Your password reset instructions have been emailed to you.</p>
</div>
</div>
<a class='close' href='#close'>
<i class='icon-cancel'></i>
</a>
</div>
</div>
<div class='modal' id='video-modal'>
<div class='cover'></div>
<div class='inner'>
<iframe></iframe>
<a class='close' href='#close'>
<i class='icon-cancel'></i>
</a>
</div>
</div>

<script src=../../js_/application-a7f51eff68dda15563d95dd6b13ee7ae.js type="text/javascript"></script>
<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
<![endif]-->

</body>
</html>





<!--
     FILE ARCHIVED ON 0:32:18 Mar 25, 2015 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 10:29:38 Sep 23, 2016.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
