<!DOCTYPE html>
<html lang='en' xml:lang='en' xmlns='http://www.w3.org/1999/xhtml'>
<head>


<script type="text/javascript" src="/static/js/analytics.js"></script>
<script type="text/javascript">archive_analytics.values.server_name="wwwb-app16.us.archive.org";archive_analytics.values.server_ms=177;</script>
<link type="text/css" rel="stylesheet" href="/static/css/banner-styles.css"/>


<title>

Backup and Restoration

&mdash; FoundationDB
</title>
<meta charset='utf-8'>
<meta content=' foundationdb, database, nosql, scalable, fault tolerant, acid, transactions' name='keywords'>
<meta content='FoundationDB is a database that combines NoSQL scalability with true multikey ACID transactions.' name='description'>
<meta content='FoundationDB' name='author'>
<meta content='IE=edge' http-equiv='x-ua-compatible'>
<meta content='173350679' property='twitter:account_id'>
<meta content='FoundationDB' property='og:title'>
<meta content='https://foundationdb.com' property='og:url'>
<meta content='https://foundationdb.com/images/stacks.png' property='og:image'>
<meta content='FoundationDB is a database that combines NoSQL scalability with true multikey ACID transactions.' name='og:description'>
<meta content='2j_g9LCoS3SGSPULb2MLPGk2raKkFd4hPOuWWM5AsVw' name='google-site-verification'>
<link href='https://foundationdb.com/key-value-store/documentation/backups.html' rel='canonical'>
<!--[if lt IE 9]>
<script src='/web/20150325003228/https://html5shiv.googlecode.com/svn/trunk/html5.js'></script>
<![endif]-->
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<link href="/web/20150325003228im_/https://d3glfbbr3jeumb.cloudfront.net/assets/favicon-eea8382cf5c35e23f9fb4273c134b2c0.png" rel="shortcut icon" type="image/png" />
<meta content="authenticity_token" name="csrf-param" />
<meta content="UxfaWP3d0EwX8REHM+LuSl9WdacO4Br/lM+IIm23e0o=" name="csrf-token" />
<link href="/web/20150325003228cs_/https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700|Gentium+Book+Basic:400,400italic" media="screen" rel="stylesheet" type="text/css" />
<link href="/web/20150325003228cs_/https://d3glfbbr3jeumb.cloudfront.net/assets/application-5cc81fa97aedacb1157cce0e30895a04.css" media="all" rel="stylesheet" type="text/css" />

</head>
<body class='show' id='documentation'>


<!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script type="text/javascript" src="/static/js/disclaim-element.js" ></script>
<script type="text/javascript" src="/static/js/graph-calc.js" ></script>
<script type="text/javascript">//<![CDATA[
var __wm = (function(imgWidth,imgHeight,yearImgWidth,monthImgWidth){
var wbPrefix = "/web/";
var wbCurrentUrl = "https://foundationdb.com/key-value-store/documentation/backups.html";

var firstYear = 1996;
var displayDay = "25";
var displayMonth = "Mar";
var displayYear = "2015";
var prettyMonths = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
var $D=document,$=function(n){return document.getElementById(n)};
var trackerVal,curYear = -1,curMonth = -1;
var yearTracker,monthTracker;
function showTrackers(val) {
  if (val===trackerVal) return;
  var $ipp=$("wm-ipp");
  var $y=$("displayYearEl"),$m=$("displayMonthEl"),$d=$("displayDayEl");
  if (val) {
    $ipp.className="hi";
  } else {
    $ipp.className="";
    $y.innerHTML=displayYear;$m.innerHTML=displayMonth;$d.innerHTML=displayDay;
  }
  yearTracker.style.display=val?"inline":"none";
  monthTracker.style.display=val?"inline":"none";
  trackerVal = val;
}
function trackMouseMove(event,element) {
  var eventX = getEventX(event);
  var elementX = getElementX(element);
  var xOff = Math.min(Math.max(0, eventX - elementX),imgWidth);
  var monthOff = xOff % yearImgWidth;

  var year = Math.floor(xOff / yearImgWidth);
  var monthOfYear = Math.min(11,Math.floor(monthOff / monthImgWidth));
  // 1 extra border pixel at the left edge of the year:
  var month = (year * 12) + monthOfYear;
  var day = monthOff % 2==1?15:1;
  var dateString = zeroPad(year + firstYear) + zeroPad(monthOfYear+1,2) +
    zeroPad(day,2) + "000000";

  $("displayYearEl").innerHTML=year+firstYear;
  $("displayMonthEl").innerHTML=prettyMonths[monthOfYear];
  // looks too jarring when it changes..
  //$("displayDayEl").innerHTML=zeroPad(day,2);
  var url = wbPrefix + dateString + '/' +  wbCurrentUrl;
  $("wm-graph-anchor").href=url;

  if(curYear != year) {
    var yrOff = year * yearImgWidth;
    yearTracker.style.left = yrOff + "px";
    curYear = year;
  }
  if(curMonth != month) {
    var mtOff = year + (month * monthImgWidth) + 1;
    monthTracker.style.left = mtOff + "px";
    curMonth = month;
  }
}
function hideToolbar() {
  $("wm-ipp").style.display="none";
}
function bootstrap() {
  var $spk=$("wm-ipp-sparkline");
  yearTracker=$D.createElement('div');
  yearTracker.className='yt';
  with(yearTracker.style){
    display='none';width=yearImgWidth+"px";height=imgHeight+"px";
  }
  monthTracker=$D.createElement('div');
  monthTracker.className='mt';
  with(monthTracker.style){
    display='none';width=monthImgWidth+"px";height=imgHeight+"px";
  }
  $spk.appendChild(yearTracker);
  $spk.appendChild(monthTracker);

  var $ipp=$("wm-ipp");
  $ipp&&disclaimElement($ipp);
}
return{st:showTrackers,mv:trackMouseMove,h:hideToolbar,bt:bootstrap};
})(525, 27, 25, 2);//]]>
</script>
<style type="text/css">
body {
  margin-top:0 !important;
  padding-top:0 !important;
  min-width:800px !important;
}
</style>
<div id="wm-ipp" lang="en" style="display:none;">

<div style="position:fixed;left:0;top:0;width:100%!important">
<div id="wm-ipp-inside">
   <table style="width:100%;"><tbody><tr>
   <td id="wm-logo">
       <a href="/web/" title="Wayback Machine home page"><img src="/static/images/toolbar/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0" /></a>
   </td>
   <td class="c">
       <table style="margin:0 auto;"><tbody><tr>
       <td class="u" colspan="2">
       <form target="_top" method="get" action="/web/form-submit.jsp" name="wmtb" id="wmtb"><input type="text" name="url" id="wmtbURL" value="https://foundationdb.com/key-value-store/documentation/backups.html" style="width:400px;" onfocus="this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20150325003228" /><input type="submit" value="Go" /><span id="wm_tb_options" style="display:block;"></span></form>
       </td>
       <td class="n" rowspan="2">
           <table><tbody>
           <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
           <tr class="m">
           	<td class="b" nowrap="nowrap">
		
		    <a href="/web/20140828103350/https://foundationdb.com/key-value-store/documentation/backups.html" title="28 Aug 2014">AUG</a>
		
		</td>
		<td class="c" id="displayMonthEl" title="You are here: 0:32:28 Mar 25, 2015">MAR</td>
		<td class="f" nowrap="nowrap">
		
		    <a href="/web/20150428230449/https://foundationdb.com/key-value-store/documentation/backups.html" title="28 Apr 2015"><strong>APR</strong></a>
		
                </td>
	    </tr>
           <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
           <tr class="d">
               <td class="b" nowrap="nowrap">
               
                   <a href="/web/20140828103350/https://foundationdb.com/key-value-store/documentation/backups.html" title="10:33:50 Aug 28, 2014"><img src="/static/images/toolbar/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0" /></a>
               
               </td>
               <td class="c" id="displayDayEl" style="width:34px;font-size:24px;" title="You are here: 0:32:28 Mar 25, 2015">25</td>
	       <td class="f" nowrap="nowrap">
               
		   <a href="/web/20150325014034/https://foundationdb.com/key-value-store/documentation/backups.html" title="1:40:34 Mar 25, 2015"><img src="/static/images/toolbar/wm_tb_nxt_on.png" alt="Next capture" width="14" height="16" border="0" /></a>
	       
	       </td>
           </tr>
           <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
           <tr class="y">
	       <td class="b" nowrap="nowrap">
               
                   2014
               
               </td>
               <td class="c" id="displayYearEl" title="You are here: 0:32:28 Mar 25, 2015">2015</td>
	       <td class="f" nowrap="nowrap">
               
                   2016
               
	       </td>
           </tr>
           </tbody></table>
       </td>
       </tr>
       <tr>
       <td class="s">
           <a class="t" href="/web/20150325003228*/https://foundationdb.com/key-value-store/documentation/backups.html" title="See a list of every capture for this URL">5 captures</a>
           <div class="r" title="Timespan for captures of this URL">28 Aug 14 - 6 Jul 15</div>
       </td>
       <td class="k">
       <a href="" id="wm-graph-anchor">
       <div id="wm-ipp-sparkline" title="Explore captures for this URL">
	 <img id="sparklineImgId" alt="sparklines"
		 onmouseover="__wm.st(1)" onmouseout="__wm.st(0)"
		 onmousemove="__wm.mv(event,this)"
		 width="525"
		 height="27"
		 border="0"
		 src="/web/jsp/graph.jsp?graphdata=525_27_1996:-1:000000000000_1997:-1:000000000000_1998:-1:000000000000_1999:-1:000000000000_2000:-1:000000000000_2001:-1:000000000000_2002:-1:000000000000_2003:-1:000000000000_2004:-1:000000000000_2005:-1:000000000000_2006:-1:000000000000_2007:-1:000000000000_2008:-1:000000000000_2009:-1:000000000000_2010:-1:000000000000_2011:-1:000000000000_2012:-1:000000000000_2013:-1:000000000000_2014:-1:000000010000_2015:2:002100100000_2016:-1:000000000000" />
       </div>
       </a>
       </td>
       </tr></tbody></table>
   </td>
   <td class="r">
       <a href="#close" onclick="__wm.h();return false;" style="background-image:url(/static/images/toolbar/wm_tb_close.png);top:5px;" title="Close the toolbar">Close</a>
       <a href="http://faq.web.archive.org/" style="background-image:url(/static/images/toolbar/wm_tb_help.png);bottom:5px;" title="Get some help using the Wayback Machine">Help</a>
   </td>
   </tr></tbody></table>
</div>
</div>
</div>
<script type="text/javascript">__wm.bt();</script>
<!-- END WAYBACK TOOLBAR INSERT -->

<header id='header'>
<div class='container'>
<a href='/web/20150325003228/https://foundationdb.com/' id='logo'></a>
<a id='mobile-nav-toggle'><img alt="Hamburger" src="/web/20150325003228im_/https://d3glfbbr3jeumb.cloudfront.net/assets/icons/hamburger-bbd9560947385da4445b540086f10c9b.png" /></a>
<a id='mobile-auth-toggle'>
<i class='icon-user'></i>
</a>
<div id='auth-links'></div>
</div>
</header>
<nav id='nav'>
<div class='container'>
<ul>
<li class=''>
<a href="/web/20150325003228/https://foundationdb.com/"><span>H</span>ome</a>
</li>
<li class='active with-subnav'>
<a href="/web/20150325003228/https://foundationdb.com/key-value-store"><span>K</span>ey-Value Store</a>
<ul class='subnav'>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store">Overview</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/documentation">Documentation</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/performance">Performance</a></li>
</ul>
</li>
<li class='with-subnav'>
<a href="/web/20150325003228/https://foundationdb.com/layers/sql"><span>S</span>QL Layer</a>
<ul class='subnav'>
<li><a href="/web/20150325003228/https://foundationdb.com/layers/sql">Overview</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/layers/sql/documentation">Documentation</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/layers/sql/performance">Performance</a></li>
</ul>
</li>
<li class='with-subnav'>
<a href="/web/20150325003228/https://foundationdb.com/community"><span>R</span>esources</a>
<ul class='subnav'>
<li><a href="/web/20150325003228/http://community.foundationdb.com/">Community</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/courses">Education</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/videos">Videos</a></li>
</ul>
</li>
<li class='with-subnav'>
<a href="/web/20150325003228/https://foundationdb.com/about"><span>C</span>ompany</a>
<ul class='subnav'>
<li><a href="/web/20150325003228/https://foundationdb.com/about">About Us</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/contact">Contact Us</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/jobs">Jobs</a></li>
</ul>
</li>
</ul>
</div>
</nav>
<div id='flash'>
<div class='notice'></div>
<div class='alert'></div>
</div>
<div id='documentation-inner'>
<div id='docs-global-nav-content'>
<ul>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/documentation/index.html">Summary</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/documentation/getting-started.html">Getting Started</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/documentation/tutorials.html">Tutorials</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/documentation/developer-guide.html">Developer Guide</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/documentation/data-modeling.html">Data Modeling</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/recipes">Design Recipes</a></li>
<li>
<a href="/web/20150325003228/https://foundationdb.com/key-value-store/documentation/api-reference.html">API Reference</a>
<ul>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/documentation/api-python.html">Python API</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/documentation/api-ruby.html">Ruby API</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/documentation/api-node.html">Node.js API</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/documentation/api-php.html">PHP API</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/documentation/javadoc/index.html">Java API</a></li>
<li><a href="/web/20150325003228/http://godoc.org/github.com/FoundationDB/fdb-go/fdb">Go API</a></li>
<li><a href="/web/20150325003228/https://github.com/Doxense/foundationdb-dotnet-client">.NET API</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/documentation/api-c.html">C API</a></li>
</ul>
</li>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/documentation/building-cluster.html">Building a Cluster</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/documentation/configuration.html">Configuration</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/documentation/administration.html">Administration</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/documentation/command-line-interface.html">Command Line Interface</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/documentation/mr-status.html">Machine-Readable Status</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/documentation/tls.html">Transport Layer Security</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/documentation/backups.html" class="active">Backup and Restoration</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/documentation/known-limitations.html">Known Limitations</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/documentation/platforms.html">Platform Issues</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/documentation/release-notes.html">Release Notes</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/documentation/older">Older Versions</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/key-value-store/white-papers">White Papers</a></li>
</ul>
</div>

<script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
  	URL_ROOT:    '',
  	VERSION:     '3.0.7',
  	COLLAPSE_INDEX: false,
  	FILE_SUFFIX: '.html',
  	HAS_SOURCE:  true
  };
</script>

<div id="breadcrumbs" class="container">
  <div id="breadcrumbs-inner">
    
    <a href="index.html">FoundationDB 3.0</a> &raquo;
    <a href="operations.html">Operations</a> &raquo;
    
    <a id="mobile-search-link" href="/web/20150325003228/https://foundationdb.com/documentation/latest/search.html">
      <img alt="Magnifying-glass" src="/web/20150325003228im_/https://d3glfbbr3jeumb.cloudfront.net/assets/icons/magnifying-glass-1e869de9fc6b47eca22fbd10a9d914a3.png" />
    </a>
  </div>
</div>
<div id="documentation" class="container">
  <div class="body sphinx">
    
  <div class="section" id="backup-and-restoration">
<span id="backups"></span><h1>Backup and Restoration<a class="headerlink" href="#backup-and-restoration" title="Permalink to this headline">∞</a></h1>
<p>This document covers backup and restoration of a FoundationDB database. While FoundationDB itself is fault tolerant, the backup tool provides an additional level of protection by supporting recovery from disasters or unintentional modification of the database.</p>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">∞</a></h2>
<p>FoundationDB&#8217;s backup tool makes a consistent, point-in-time backup of a FoundationDB database without downtime. Like FoundationDB itself, the backup software is distributed, with multiple backup agents cooperating to perform a backup faster than a single machine can send or receive data and to continue the backup process seamlessly even when some backup agents fail.</p>
<p>Since the FoundationDB database usually cannot maintain a consistent snapshot long enough to perform a full backup, the backup tool stores an <em>inconsistent</em> copy of the data with a log of database changes that took place during the backup process. The copy and the logs are combined at restore time to reconstruct a consistent, point-in-time snapshot of the database.</p>
<p>The backup tool has three components:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">fdbbackup</span></tt></dt>
<dd>This command line tool is used to control the backup process. It can <tt class="docutils literal"><span class="pre">start</span></tt> or <tt class="docutils literal"><span class="pre">abort</span></tt> a backup, <tt class="docutils literal"><span class="pre">discontinue</span></tt> a continuous backup, get the <tt class="docutils literal"><span class="pre">status</span></tt> of an ongoing backup, or <tt class="docutils literal"><span class="pre">wait</span></tt> for a backup to complete. It controls <tt class="docutils literal"><span class="pre">backup_agent</span></tt> processes using the database and never does any work itself.</dd>
<dt><tt class="docutils literal"><span class="pre">fdbrestore</span></tt></dt>
<dd>This command line tool is used to restore a backup. It does not currently make use of <tt class="docutils literal"><span class="pre">backup_agent</span></tt> processes but directly performs the restore itself, so it must have access to the backup files. By default, <tt class="docutils literal"><span class="pre">fdbrestore</span></tt> will provide information about the backup directory (or directories) restored, such as the available version, the  ranges included in the backup, and when they were backed up.</dd>
<dt><tt class="docutils literal"><span class="pre">backup_agent</span></tt></dt>
<dd>The backup agent does the actual work of the backup: reading data (and logs) from the database and writing it to a specified directory. Any number of backup agents pointed at the same database will cooperate to perform the backup. The location or locations in which you want to store backup files therefore needs to be accessible to all <tt class="docutils literal"><span class="pre">backup_agent</span></tt> processes.</dd>
</dl>
<p>By default, the FoundationDB packages are configured to start a single <tt class="docutils literal"><span class="pre">backup_agent</span></tt> process on each FoundationDB server. If you want to perform a backup to a network drive that is accessible to every server, you can immediately use the <tt class="docutils literal"><span class="pre">fdbbackup</span> <span class="pre">start</span></tt> command from any machine with access to your cluster to start the backup:</p>
<div class="highlight-python"><div class="highlight"><pre>user@host$ fdbbackup start -d /shared/database-backups/
</pre></div>
</div>
<p>If instead you want to perform a backup to the local disk of a particular machine or machines which are not network accessible to the FoundationDB servers, then you should disable the backup agents on the FoundationDB servers. This is accomplished by commenting out all of the <tt class="docutils literal"><span class="pre">[backup_agent.&lt;ID&gt;]</span></tt> sections in <a class="reference internal" href="configuration.html#foundationdb-conf"><em>foundationdb.conf</em></a>. Do not comment out the global <tt class="docutils literal"><span class="pre">[backup_agent]</span></tt> section. Next, <a class="reference internal" href="#backup-agent"><em>start backup agents</em></a> on the destination machine or machines. Now, when you start a backup, you can specify the destination directory using a local path on the destination machines. The backup agents will fetch data from the database and store it locally on the destination machines.</p>
</div>
<div class="section" id="fdbbackup-command-line-tool">
<h2><tt class="docutils literal"><span class="pre">fdbbackup</span></tt> command line tool<a class="headerlink" href="#fdbbackup-command-line-tool" title="Permalink to this headline">∞</a></h2>
<p>The <tt class="docutils literal"><span class="pre">fdbbackup</span></tt> command line tool is used to control the backup process.</p>
<div class="highlight-python"><div class="highlight"><pre>user@host$ fdbbackup [-h] [-v] [-C &lt;CLUSTER_FILE&gt;] &lt;SUBCOMMAND&gt; &lt;SUBCOMMAND_OPTION&gt;*
</pre></div>
</div>
<p>The following optional arguments must be specified <em>before</em> a subcommand:</p>
<blockquote>
<div><dl class="option">
<dt id="cmdoption-fdbbackup-h">
<tt class="descname">-h</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption-fdbbackup-h" title="Permalink to this definition">∞</a></dt>
<dd><p>Get help on the <tt class="docutils literal"><span class="pre">fdbbackup</span></tt> command.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-fdbbackup-v">
<tt class="descname">-v</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption-fdbbackup-v" title="Permalink to this definition">∞</a></dt>
<dd><p>Get the version of FoundationDB in use.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-fdbbackup-C">
<tt class="descname">-C</tt><tt class="descclassname"> &lt;CLUSTER_FILE&gt;</tt><a class="headerlink" href="#cmdoption-fdbbackup-C" title="Permalink to this definition">∞</a></dt>
<dd><p>Specify the path to the <tt class="docutils literal"><span class="pre">fdb.cluster</span></tt> file that should be used to connect to the FoundationDB cluster you want to back up.</p>
<p>If not specified, a <a class="reference internal" href="administration.html#default-cluster-file"><em>default cluster file</em></a> will be used.</p>
</dd></dl>

</div></blockquote>
<div class="section" id="start">
<span id="backup-start"></span><h3><tt class="docutils literal"><span class="pre">start</span></tt><a class="headerlink" href="#start" title="Permalink to this headline">∞</a></h3>
<p>The <tt class="docutils literal"><span class="pre">start</span></tt> subcommand is used to start a backup.  If there is already a backup in progress, the command will fail and the current backup will be unaffected.  Otherwise, a backup is started. If the wait option is used, the command will wait for the backup to complete; otherwise, it returns immediately.</p>
<blockquote>
<div><dl class="option">
<dt id="cmdoption-fdbbackup-start-h">
<tt class="descname">-h</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption-fdbbackup-start-h" title="Permalink to this definition">∞</a></dt>
<dd><p>Get help on the <tt class="docutils literal"><span class="pre">fdbbackup</span> <span class="pre">start</span></tt> subcommand.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-fdbbackup-start-d">
<tt class="descname">-d</tt><tt class="descclassname"> &lt;DESTINATION_PATH&gt;</tt><a class="headerlink" href="#cmdoption-fdbbackup-start-d" title="Permalink to this definition">∞</a></dt>
<dd><div class="line-block">
<div class="line">Specify an absolute path to the destination directory where backups will be written. The destination directory must exist and be writable by every active <tt class="docutils literal"><span class="pre">backup_agent</span></tt> process connected to the FoundationDB cluster, but need not be accessible to the <tt class="docutils literal"><span class="pre">fdbbackup</span></tt> tool itself. (By default, the <tt class="docutils literal"><span class="pre">backup_agent</span></tt> process is running as the <tt class="docutils literal"><span class="pre">foundationdb</span></tt> user and group on each FoundationDB server.)</div>
<div class="line"><br /></div>
<div class="line">Backup files are not written directly to this directory, but in a subdirectory of this directory unique for each backup. For example, if the destination path is <tt class="docutils literal"><span class="pre">/shared/database-backups/</span></tt>, the backup agents will create a subdirectory like <tt class="docutils literal"><span class="pre">/shared/database-backups/backup-2012-11-01-08-50-22.285173</span></tt> and then many files inside with names like <tt class="docutils literal"><span class="pre">/shared/database-backups/backup-2012-11-01-08-50-22.285173/backup,1191663,44ca4b421ccd45129baa2118b4423074.kvdata</span></tt>. Once the backup has completed successfully, all the files in the backup subdirectory together make up the backup. For restoring a backup to succeed, all of these files must be present. The last file written will be <tt class="docutils literal"><span class="pre">/shared/database-backups/backup-2012-11-01-08-50-22.285173/restorable</span></tt>.</div>
</div>
</dd></dl>

<dl class="option">
<dt id="cmdoption-fdbbackup-start-w">
<tt class="descname">-w</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption-fdbbackup-start-w" title="Permalink to this definition">∞</a></dt>
<dd><p>Wait for the backup to complete with behavior identical to that of the <a class="reference internal" href="#backup-wait"><em>wait command</em></a>.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-fdbbackup-start-k">
<tt class="descname">-k</tt><tt class="descclassname"> &lt;KEY_RANGE&gt;+</tt><a class="headerlink" href="#cmdoption-fdbbackup-start-k" title="Permalink to this definition">∞</a></dt>
<dd><div class="line-block">
<div class="line">Specify one or more key ranges to be used for the backup. The key ranges are specifed on a single line, separated by spaces. Each key range consists of a single quoted string of the form <tt class="docutils literal"><span class="pre">[&lt;BEGIN_KEY&gt;</span> <span class="pre">[&lt;END_KEY&gt;]]</span></tt>. If <tt class="docutils literal"><span class="pre">&lt;END_KEY&gt;</span></tt> is given, the range extends from <tt class="docutils literal"><span class="pre">&lt;BEGIN_KEY&gt;</span></tt> (inclusive) to <tt class="docutils literal"><span class="pre">&lt;END_KEY&gt;</span></tt> (exclusive). If <tt class="docutils literal"><span class="pre">&lt;END_KEY&gt;</span></tt> is omitted, the range consists of all keys with <tt class="docutils literal"><span class="pre">&lt;BEGIN_KEY&gt;</span></tt> as a proper prefix.</div>
<div class="line"><br /></div>
<div class="line">Each key range should be quoted in a manner appropriate for your command line environment. Here are some examples for Bash:</div>
<div class="line"><tt class="docutils literal"><span class="pre">fdbbackup</span> <span class="pre">start</span> <span class="pre">-k</span> <span class="pre">'apple</span> <span class="pre">bananna'</span> <span class="pre">-k</span> <span class="pre">'mango</span> <span class="pre">pineapple'</span> <span class="pre">/home/fdbuser/backup</span></tt></div>
<div class="line"><tt class="docutils literal"><span class="pre">fdbbackup</span> <span class="pre">start</span> <span class="pre">-k</span> <span class="pre">'&#64;pp1e</span> <span class="pre">b*n*nn*'</span> <span class="pre">-k</span> <span class="pre">'#an&amp;0</span> <span class="pre">p^n3app!e'</span> <span class="pre">/home/fdbuser/backup</span></tt></div>
<div class="line"><br /></div>
<div class="line">Here are the equivalent examples for Windows:</div>
<div class="line"><tt class="docutils literal"><span class="pre">fdbbackup.exe</span> <span class="pre">start</span> <span class="pre">-k</span> <span class="pre">&quot;apple</span> <span class="pre">bananna&quot;</span> <span class="pre">-k</span> <span class="pre">&quot;mango</span> <span class="pre">pineapple&quot;</span> <span class="pre">C:\Users\fdbuser\backup</span></tt></div>
<div class="line"><tt class="docutils literal"><span class="pre">fdbbackup.exe</span> <span class="pre">start</span> <span class="pre">-k</span> <span class="pre">&quot;&#64;pp1e</span> <span class="pre">b*n*nn*&quot;</span> <span class="pre">-k</span> <span class="pre">&quot;#an&amp;0</span> <span class="pre">p^n3app!e&quot;</span> <span class="pre">C:\Users\fdbuser\backup</span></tt></div>
</div>
</dd></dl>

<dl class="option">
<dt id="cmdoption-fdbbackup-start-z">
<tt class="descname">-z</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption-fdbbackup-start-z" title="Permalink to this definition">∞</a></dt>
<dd><p>Perform the backup continuously rather than terminating when a full backup is complete. All subsequent writes (in the backup&#8217;s key ranges) will be included in the backup.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Restoring a backup will take time proportional to the duration of the backup. Therefore, leaving a backup running with -z for an extended period is not recommended. The continuous backup feature should only be used if you periodically discontinue and restart the backup.</p>
</div>
</dd></dl>

</div></blockquote>
</div>
<div class="section" id="abort">
<h3><tt class="docutils literal"><span class="pre">abort</span></tt><a class="headerlink" href="#abort" title="Permalink to this headline">∞</a></h3>
<p>The <tt class="docutils literal"><span class="pre">abort</span></tt> subcommand is used to abort a backup that is currently in progress.  If there is no backup in progress, the command will return an error.  The destination subdirectory is not deleted automatically, but it cannot be used to perform a restore.</p>
<blockquote>
<div><dl class="option">
<dt id="cmdoption-fdbbackup-abort-h">
<tt class="descname">-h</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption-fdbbackup-abort-h" title="Permalink to this definition">∞</a></dt>
<dd><p>Get help on the <tt class="docutils literal"><span class="pre">fdbbackup</span> <span class="pre">abort</span></tt> subcommand.</p>
</dd></dl>

<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <tt class="docutils literal"><span class="pre">abort</span></tt> command will render any running backup unrestorable. To stop a continuous backup gracefully, use <tt class="docutils literal"><span class="pre">discontinue</span></tt>.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="discontinue">
<h3><tt class="docutils literal"><span class="pre">discontinue</span></tt><a class="headerlink" href="#discontinue" title="Permalink to this headline">∞</a></h3>
<p>The <tt class="docutils literal"><span class="pre">discontinue</span></tt> subcommand is only available for backups that were started with the continuous (<tt class="docutils literal"><span class="pre">-z</span></tt>) option. Its effect is to discontinue the continous backup. Note that the subcommand does <em>not</em> abort the backup; it simply allows the backup to complete as a noncontinuous backup would.</p>
<blockquote>
<div><dl class="option">
<dt id="cmdoption-fdbbackup-discontinue-h">
<tt class="descname">-h</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption-fdbbackup-discontinue-h" title="Permalink to this definition">∞</a></dt>
<dd><p>Get help on the <tt class="docutils literal"><span class="pre">fdbbackup</span> <span class="pre">discontinue</span></tt> subcommand.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-fdbbackup-discontinue-w">
<tt class="descname">-w</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption-fdbbackup-discontinue-w" title="Permalink to this definition">∞</a></dt>
<dd><p>Wait for the backup to complete with behavior identical to that of the <a class="reference internal" href="#backup-wait"><em>wait command</em></a>.</p>
</dd></dl>

</div></blockquote>
</div>
<div class="section" id="wait">
<span id="backup-wait"></span><h3><tt class="docutils literal"><span class="pre">wait</span></tt><a class="headerlink" href="#wait" title="Permalink to this headline">∞</a></h3>
<p>The <tt class="docutils literal"><span class="pre">wait</span></tt> subcommand is used to wait for a backup to complete, which is useful for scripting purposes.  If there is a backup in progress, it waits for it to complete or be aborted and returns a status based on the result of the backup.  If there is no backup in progress, it returns immediately based on the result of the previous backup.  The exit code is zero (success) if the backup was completed successfully and nonzero if it was aborted.</p>
<blockquote>
<div><dl class="option">
<dt id="cmdoption-fdbbackup-wait-h">
<tt class="descname">-h</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption-fdbbackup-wait-h" title="Permalink to this definition">∞</a></dt>
<dd><p>Get help on the <tt class="docutils literal"><span class="pre">fdbbackup</span> <span class="pre">wait</span></tt> subcommand.</p>
</dd></dl>

</div></blockquote>
</div>
<div class="section" id="status">
<h3><tt class="docutils literal"><span class="pre">status</span></tt><a class="headerlink" href="#status" title="Permalink to this headline">∞</a></h3>
<p>The <tt class="docutils literal"><span class="pre">status</span></tt> subcommand is used to get information on the current status of a backup.  It tells whether there is a backup in progress and backup agents are running. It will also report any errors that have been encountered by backup agents (e.g., errors writing to the output directory).</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre>user@host$ fdbbackup status -e 1
Backup in progress to /share/backup_test/out/backup-2012-11-01-10-30-59.270596/.
WARNING: Some backup agents have reported errors (printing 1):
    rebar06(17403) - Error opening /share/backup_test/out/backup-2012-11-01-10-30-59.270596/temp.aff16af7e28046698bc847dc36f3f0f4.part. (IOError: [Errno 2] No such file or directory: &#39;/share/backup_test/out/backup-2012-11-01-10-30-59.270596/temp.aff16af7e28046698bc847dc36f3f0f4.part&#39;)
</pre></div>
</div>
<dl class="option">
<dt id="cmdoption-fdbbackup-status-h">
<tt class="descname">-h</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption-fdbbackup-status-h" title="Permalink to this definition">∞</a></dt>
<dd><p>Get help on the <tt class="docutils literal"><span class="pre">fdbbackup</span> <span class="pre">status</span></tt> subcommand.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-fdbbackup-status-e">
<tt class="descname">-e</tt><tt class="descclassname"> &lt;LIMIT&gt;</tt><a class="headerlink" href="#cmdoption-fdbbackup-status-e" title="Permalink to this definition">∞</a></dt>
<dd><p>Print the last (up to) <tt class="docutils literal"><span class="pre">&lt;LIMIT&gt;</span></tt> errors that were logged into the database by backup agents.  The default is 10.</p>
</dd></dl>

</div></blockquote>
</div>
</div>
<div class="section" id="fdbrestore-command-line-tool">
<h2><tt class="docutils literal"><span class="pre">fdbrestore</span></tt> command line tool<a class="headerlink" href="#fdbrestore-command-line-tool" title="Permalink to this headline">∞</a></h2>
<p>The <tt class="docutils literal"><span class="pre">fdbrestore</span></tt> command line tool is used to restore a backup.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Restoring a backup will wipe out the current contents of your database, so use this tool with caution!</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">It is your responsibility to ensure that no clients are accessing the database while it is being restored. During the restore process the database is in an inconsistent state, and writes that happen during the restore process might be partially or completely overwritten by restored data.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre>user@host$ fdbrestore [-h] [-C &lt;CLUSTER_FILE&gt;] [-v &lt;VERSION&gt;] &lt;FOLDER&gt;+
</pre></div>
</div>
<p>The positional <tt class="docutils literal"><span class="pre">&lt;FOLDER&gt;</span></tt> parameter specifies the backup directory that will be restored.  This should be the specific timestamped data folder created by a particular backup and containing many <tt class="docutils literal"><span class="pre">*.kvdata</span></tt> and <tt class="docutils literal"><span class="pre">*.trlog</span></tt> files, not the top-level destination directory that you passed to <tt class="docutils literal"><span class="pre">fdbbackup</span> <span class="pre">start</span></tt>.  Multiple folders may be specified in case you have files from a single backup spread across multiple directories; the effect will be the same as if all the files in the specified folders were copied into the same directory.</p>
<dl class="option">
<dt id="cmdoption-fdbrestore-h">
<tt class="descname">-h</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption-fdbrestore-h" title="Permalink to this definition">∞</a></dt>
<dd><p>Get help on the <tt class="docutils literal"><span class="pre">fdbrestore</span></tt> command.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-fdbrestore-C">
<tt class="descname">-C</tt><tt class="descclassname"> &lt;CLUSTER_FILE&gt;</tt><a class="headerlink" href="#cmdoption-fdbrestore-C" title="Permalink to this definition">∞</a></dt>
<dd><p>Specify the path to the <tt class="docutils literal"><span class="pre">fdb.cluster</span></tt> file that should be used to connect to the FoundationDB cluster you want to restore to.</p>
<p>If not specified, a <a class="reference internal" href="administration.html#default-cluster-file"><em>default cluster file</em></a> will be used.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-fdbrestore-v">
<tt class="descname">-v</tt><tt class="descclassname"> &lt;VERSION&gt;</tt><a class="headerlink" href="#cmdoption-fdbrestore-v" title="Permalink to this definition">∞</a></dt>
<dd><p>Specify the database version that will be restored.  By default, the latest possible version will be restored.</p>
</dd></dl>

</div>
<div class="section" id="backup-agent-command-line-tool">
<span id="backup-agent"></span><h2><tt class="docutils literal"><span class="pre">backup-agent</span></tt> command line tool<a class="headerlink" href="#backup-agent-command-line-tool" title="Permalink to this headline">∞</a></h2>
<p><tt class="docutils literal"><span class="pre">backup-agent</span></tt> is started automatically on each server in the default configuration of FoundationDB, so you will not normally need to invoke it at the command line.  One case in which you would need to do so would be to perform a backup to a destination which is not accessible via a shared filesystem.</p>
<div class="highlight-python"><div class="highlight"><pre>user@host$ backup-agent [-h] [-v] [-C &lt;CLUSTER_FILE&gt;]
</pre></div>
</div>
<dl class="option">
<dt id="cmdoption-backup-agent-h">
<tt class="descname">-h</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption-backup-agent-h" title="Permalink to this definition">∞</a></dt>
<dd><p>Get help on the <tt class="docutils literal"><span class="pre">backup-agent</span></tt> command.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-backup-agent-v">
<tt class="descname">-v</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption-backup-agent-v" title="Permalink to this definition">∞</a></dt>
<dd><p>Get the version of FoundationDB in use.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-backup-agent-C">
<tt class="descname">-C</tt><tt class="descclassname"> &lt;CLUSTER_FILE&gt;</tt><a class="headerlink" href="#cmdoption-backup-agent-C" title="Permalink to this definition">∞</a></dt>
<dd><p>Specify the path to the <tt class="docutils literal"><span class="pre">fdb.cluster</span></tt> file that should be used to connect to the FoundationDB cluster you want to back up.</p>
<p>If not specified, a <a class="reference internal" href="administration.html#default-cluster-file"><em>default cluster file</em></a> will be used.</p>
</dd></dl>

</div>
</div>


  </div>
  <div id="search-documentation">
    <form action="search.html" method="get">
      <input type="text" name="q" class="search-query" placeholder="Search Documentation" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <div id="docs-page-nav">
      <h3>Navigate this page</h3>
      <ul><li><a class="reference internal" href="#">Backup and Restoration</a><ul><li><a class="reference internal" href="#introduction">Introduction</a></li><li><a class="reference internal" href="#fdbbackup-command-line-tool"><tt class="docutils literal"><span class="pre">fdbbackup</span></tt> command line tool</a><ul><li><a class="reference internal" href="#start"><tt class="docutils literal"><span class="pre">start</span></tt></a></li><li><a class="reference internal" href="#abort"><tt class="docutils literal"><span class="pre">abort</span></tt></a></li><li><a class="reference internal" href="#discontinue"><tt class="docutils literal"><span class="pre">discontinue</span></tt></a></li><li><a class="reference internal" href="#wait"><tt class="docutils literal"><span class="pre">wait</span></tt></a></li><li><a class="reference internal" href="#status"><tt class="docutils literal"><span class="pre">status</span></tt></a></li></ul></li><li><a class="reference internal" href="#fdbrestore-command-line-tool"><tt class="docutils literal"><span class="pre">fdbrestore</span></tt> command line tool</a></li><li><a class="reference internal" href="#backup-agent-command-line-tool"><tt class="docutils literal"><span class="pre">backup-agent</span></tt> command line tool</a></li></ul></li></ul>
    </div>
    <div id="docs-global-nav">
      <h3>Navigate All Docs</h3>
    </div>
  </div>
</div>


</div>
<footer id='footer'>
<div class='container'>
<ul>
<li>
<h3>Get Help</h3>
<ul id='get-help-list'>
<li><a href="/web/20150325003228/https://foundationdb.com/contact">Contact Us</a></li>
</ul>
</li>
<li>
<h3>Social</h3>
<ul>
<li><a href="/web/20150325003228/https://twitter.com/foundationdb">Twitter</a></li>
</ul>
</li>
<li>
<h3>Legal</h3>
<ul>
<li><a href="/web/20150325003228/https://foundationdb.com/legal/privacy">Privacy Policy</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/legal/terms">Terms of Service</a></li>
<li><a href="/web/20150325003228/https://foundationdb.com/legal/trademark">Trademark Disclaimer</a></li>
</ul>
</li>
</ul>
</div>
<div id='copyright'>&copy; 2015 FoundationDB</div>
</footer>
<div class='modal' id='login-modal'>
<div class='cover'></div>
<div class='inner'>
<h2>FoundationDB Log In</h2>
<div class='content'>
<div id='explanation'></div>
<form>
<fieldset>
<div class='errors'></div>
<ul>
<li>
<label for="email">Email Address</label>
<input id='email' type='email' value=''>
</li>
<li>
<label for="password">Password</label>
<input id='password' type='password'>
</li>
<li class='actions'>
<button>
Log In
<span class='spinner'></span>
</button>
<a href="#signup">Need an account?</a>
<a href="#reset-password" id="login-reset-link">Need to reset your password?</a>
</li>
</ul>
</fieldset>
</form>
</div>
<a class='close' href='#close'>
<i class='icon-cancel'></i>
</a>
</div>
</div>
<div class='modal' id='reset-password-modal'>
<div class='cover'></div>
<div class='inner'>
<h2>Reset Your Password</h2>
<div class='content'>
<form>
<p class='note'>Enter your email address below and we'll send you password reset instructions.</p>
<fieldset>
<div class='errors'></div>
<ul>
<li>
<label for="email">Email Address</label>
<input autocapitalize="false" id="email" name="email" type="email" value="" />
</li>
<li class='actions'>
<button>
Send Instructions
<span class='spinner'></span>
</button>
<a href="#cancel">Cancel</a>
</li>
</ul>
</fieldset>
</form>
<div id='done'>
<p>Please check your email. Your password reset instructions have been emailed to you.</p>
</div>
</div>
<a class='close' href='#close'>
<i class='icon-cancel'></i>
</a>
</div>
</div>
<div class='modal' id='video-modal'>
<div class='cover'></div>
<div class='inner'>
<iframe></iframe>
<a class='close' href='#close'>
<i class='icon-cancel'></i>
</a>
</div>
</div>

<script src="/web/20150325003228js_/https://d3glfbbr3jeumb.cloudfront.net/assets/application-a7f51eff68dda15563d95dd6b13ee7ae.js" type="text/javascript"></script>
<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
<![endif]-->

</body>
</html>





<!--
     FILE ARCHIVED ON 0:32:28 Mar 25, 2015 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 10:29:10 Sep 23, 2016.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
